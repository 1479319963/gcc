2022-02-18  Kwok Cheung Yeung  <kcy@codesourcery.com>

	* c-c++-common/gomp/metadirective-1.c (f): Add test for
	improperly nested metadirectives.

2022-02-11  Kwok Cheung Yeung  <kcy@codesourcery.com>

	* gfortran.dg/gomp/metadirective-2.f90 (main): Test empty
	metadirective.

2022-02-11  Kwok Cheung Yeung  <kcy@codesourcery.com>

	* gfortran.dg/gomp/metadirective-8.f90: New.

2022-01-28  Kwok Cheung Yeung  <kcy@codesourcery.com>

	* c-c++-common/gomp/metadirective-4.c (main): Add expected warning.
	* gfortran.dg/gomp/metadirective-4.f90 (test): Likewise.

2022-01-25  Kwok Cheung Yeung  <kcy@codesourcery.com>

	* c-c++-common/gomp/metadirective-7.c: New.
	* gfortran.dg/gomp/metadirective-7.f90: New.

2022-01-25  Kwok Cheung Yeung  <kcy@codesourcery.com>

	* c-c++-common/gomp/metadirective-1.c: New.
	* c-c++-common/gomp/metadirective-2.c: New.
	* c-c++-common/gomp/metadirective-3.c: New.
	* c-c++-common/gomp/metadirective-4.c: New.
	* c-c++-common/gomp/metadirective-5.c: New.
	* c-c++-common/gomp/metadirective-6.c: New.
	* gcc.dg/gomp/metadirective-1.c: New.
	* gfortran.dg/gomp/metadirective-1.f90: New.
	* gfortran.dg/gomp/metadirective-2.f90: New.
	* gfortran.dg/gomp/metadirective-3.f90: New.
	* gfortran.dg/gomp/metadirective-4.f90: New.
	* gfortran.dg/gomp/metadirective-5.f90: New.
	* gfortran.dg/gomp/metadirective-6.f90: New.

2022-01-23  Sandra Loosemore  <sandra@codesourcery.com>

	PR fortran/103695
	PR fortran/102621

	Backport from mainline:

	2022-01-20  Sandra Loosemore  <sandra@codesourcery.com>

	* gfortran.dg/gomp/affinity-clause-3.f90: Adjust pattern.
	* gfortran.dg/gomp/pr102621.f90: New.
	* gfortran.dg/gomp/pr103695.f90: New.

2021-12-22  Andrew Stubbs  <ams@codesourcery.com>

	* gfortran.dg/gomp/requires-8.f90: Reinstate dynamic allocators
	requirement.

2021-11-10  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-10-21  Jakub Jelinek  <jakub@redhat.com>

	PR middle-end/64888
	* c-c++-common/ubsan/pr64888.c: New test.

2021-11-02  Tobias Burnus  <tobias@codesourcery.com>

	Backport from master:
	2021-11-02  Jakub Jelinek  <jakub@redhat.com>
	
	* g++.dg/gomp/loop-8.C: New test.

2021-11-02  Tobias Burnus  <tobias@codesourcery.com>

	Backport from master:
	2021-10-30  Jakub Jelinek  <jakub@redhat.com>

	* c-c++-common/gomp/loop-10.c: New test.

2021-10-27  Tobias Burnus  <tobias@codesourcery.com>

	Backport from master:
	2021-10-27  Tobias Burnus  <tobias@codesourcery.com>

	* gfortran.dg/PR93963.f90: Extend testcase by scan-tree-dump test.

2021-10-27  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-10-27  Jakub Jelinek  <jakub@redhat.com>

	* c-c++-common/gomp/loop-8.c: New test.
	* c-c++-common/gomp/loop-9.c: New test.

2021-10-27  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-10-27  Jakub Jelinek  <jakub@redhat.com>

	PR c++/102854
	* g++.dg/gomp/loop-3.C: Don't expect some errors.
	* g++.dg/gomp/loop-7.C: New test.

2021-10-26  Tobias Burnus  <tobias@codesourcery.com>

	Backport from master:
	2021-10-26  Tobias Burnus  <tobias@codesourcery.com>

	PR fortran/102885
	* gfortran.dg/lto/bind-c-char_0.f90: New test.

2021-10-21  Tobias Burnus  <tobias@codesourcery.com>

	Backport from master:
	2021-10-20  Sandra Loosemore  <sandra@codesourcery.com>

	PR fortran/94070
	* gfortran.dg/c-interop/shape-bindc.f90: New test.
	* gfortran.dg/c-interop/shape-poly.f90: New test.
	* gfortran.dg/c-interop/size-bindc.f90: New test.
	* gfortran.dg/c-interop/size-poly.f90: New test.
	* gfortran.dg/c-interop/ubound-bindc.f90: New test.
	* gfortran.dg/c-interop/ubound-poly.f90: New test.

2021-10-20  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-10-20  Tobias Burnus  <tobias@codesourcery.com>

	PR fortran/102815
	* gfortran.dg/bind-c-contiguous-5.c (do_call, reset_var): Handle
	big andian.

2021-10-19  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-10-19  Tobias Burnus  <tobias@codesourcery.com>

	PR fortran/92482
	* gfortran.dg/bind-c-char-descr.f90: Remove xfail; extend a bit.

2021-10-18  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-10-18  Kwok Cheung Yeung  <kcy@codesourcery.com>

	* gfortran.dg/gomp/declare-variant-15.f90 (variant2, base2, test2):
	Add tests.
	* gfortran.dg/gomp/declare-variant-16.f90 (base2, variant2, test2):
	Add tests.

2021-10-15  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-10-14  Kwok Cheung Yeung  <kcy@codesourcery.com>

	* gfortran.dg/gomp/declare-variant-1.f90: New test.
	* gfortran.dg/gomp/declare-variant-10.f90: New test.
	* gfortran.dg/gomp/declare-variant-11.f90: New test.
	* gfortran.dg/gomp/declare-variant-12.f90: New test.
	* gfortran.dg/gomp/declare-variant-13.f90: New test.
	* gfortran.dg/gomp/declare-variant-14.f90: New test.
	* gfortran.dg/gomp/declare-variant-15.f90: New test.
	* gfortran.dg/gomp/declare-variant-16.f90: New test.
	* gfortran.dg/gomp/declare-variant-17.f90: New test.
	* gfortran.dg/gomp/declare-variant-18.f90: New test.
	* gfortran.dg/gomp/declare-variant-19.f90: New test.
	* gfortran.dg/gomp/declare-variant-2.f90: New test.
	* gfortran.dg/gomp/declare-variant-2a.f90: New test.
	* gfortran.dg/gomp/declare-variant-3.f90: New test.
	* gfortran.dg/gomp/declare-variant-4.f90: New test.
	* gfortran.dg/gomp/declare-variant-5.f90: New test.
	* gfortran.dg/gomp/declare-variant-6.f90: New test.
	* gfortran.dg/gomp/declare-variant-7.f90: New test.
	* gfortran.dg/gomp/declare-variant-8.f90: New test.
	* gfortran.dg/gomp/declare-variant-9.f90: New test.

2021-10-13  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-10-13  Tobias Burnus  <tobias@codesourcery.com>

	PR fortran/102086
	PR fortran/92189
	PR fortran/92621
	PR fortran/101308
	PR fortran/101309
	PR fortran/101635
	PR fortran/92482
	* gfortran.dg/ISO_Fortran_binding_4.f90: Extend testcase.
	* gfortran.dg/PR100914.f90: Remove xfail.
	* gfortran.dg/PR100915.c: Expect CFI_type_cfunptr.
	* gfortran.dg/PR100915.f90: Handle CFI_type_cfunptr != CFI_type_cptr.
	* gfortran.dg/PR93963.f90: Extend select-rank tests.
	* gfortran.dg/bind-c-intent-out.f90: Change to dg-do run,
	update scan-dump.
	* gfortran.dg/bind_c_array_params_2.f90: Update/extend scan-dump.
	* gfortran.dg/bind_c_char_10.f90: Update scan-dump.
	* gfortran.dg/bind_c_char_8.f90: Remove dg-error "sorry".
	* gfortran.dg/c-interop/allocatable-dummy.f90: Remove xfail.
	* gfortran.dg/c-interop/c1255-1.f90: Likewise.
	* gfortran.dg/c-interop/c407c-1.f90: Update dg-error.
	* gfortran.dg/c-interop/cf-descriptor-5.f90: Remove xfail.
	* gfortran.dg/c-interop/cf-out-descriptor-3.f90: Likewise.
	* gfortran.dg/c-interop/cf-out-descriptor-4.f90: Likewise.
	* gfortran.dg/c-interop/cf-out-descriptor-5.f90: Likewise.
	* gfortran.dg/c-interop/contiguous-2.f90: Likewise.
	* gfortran.dg/c-interop/contiguous-3.f90: Likewise.
	* gfortran.dg/c-interop/deferred-character-1.f90: Likewise.
	* gfortran.dg/c-interop/deferred-character-2.f90: Likewise.
	* gfortran.dg/c-interop/fc-descriptor-3.f90: Likewise.
	* gfortran.dg/c-interop/fc-descriptor-5.f90: Likewise.
	* gfortran.dg/c-interop/fc-descriptor-6.f90: Likewise.
	* gfortran.dg/c-interop/fc-out-descriptor-3.f90: Likewise.
	* gfortran.dg/c-interop/fc-out-descriptor-4.f90: Likewise.
	* gfortran.dg/c-interop/fc-out-descriptor-5.f90: Likewise.
	* gfortran.dg/c-interop/fc-out-descriptor-6.f90: Likewise.
	* gfortran.dg/c-interop/ff-descriptor-5.f90: Likewise.
	* gfortran.dg/c-interop/ff-descriptor-6.f90: Likewise.
	* gfortran.dg/c-interop/fc-descriptor-7.f90: Remove xfail + extend.
	* gfortran.dg/c-interop/fc-descriptor-7-c.c: Update for changes.
	* gfortran.dg/c-interop/shape.f90: Add implicit none.
	* gfortran.dg/c-interop/typecodes-array-char-c.c: Add kind=4 char.
	* gfortran.dg/c-interop/typecodes-array-char.f90: Likewise.
	* gfortran.dg/c-interop/typecodes-array-float128.f90: Remove xfail.
	* gfortran.dg/c-interop/typecodes-scalar-basic.f90: Likewise.
	* gfortran.dg/c-interop/typecodes-scalar-float128.f90: Likewise.
	* gfortran.dg/c-interop/typecodes-scalar-int128.f90: Likewise.
	* gfortran.dg/c-interop/typecodes-scalar-longdouble.f90: Likewise.
	* gfortran.dg/iso_c_binding_char_1.f90: Remove dg-error "sorry".
	* gfortran.dg/pr93792.f90: Turn XFAIL into PASS.
	* gfortran.dg/ISO_Fortran_binding_19.f90: New test.
	* gfortran.dg/assumed_type_12.f90: New test.
	* gfortran.dg/assumed_type_13.c: New test.
	* gfortran.dg/assumed_type_13.f90: New test.
	* gfortran.dg/bind-c-char-descr.f90: New test.
	* gfortran.dg/bind-c-contiguous-1.c: New test.
	* gfortran.dg/bind-c-contiguous-1.f90: New test.
	* gfortran.dg/bind-c-contiguous-2.f90: New test.
	* gfortran.dg/bind-c-contiguous-3.c: New test.
	* gfortran.dg/bind-c-contiguous-3.f90: New test.
	* gfortran.dg/bind-c-contiguous-4.c: New test.
	* gfortran.dg/bind-c-contiguous-4.f90: New test.
	* gfortran.dg/bind-c-contiguous-5.c: New test.
	* gfortran.dg/bind-c-contiguous-5.f90: New test.

2021-10-12  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-10-12  Tobias Burnus  <tobias@codesourcery.com>

	PR fortran/102541
	* gfortran.dg/assumed_rank_24.f90: New test.

2021-10-12  Tobias Burnus  <tobias@codesourcery.com>

	* gfortran.dg/gomp/defaultmap-2.f90: Replace unsupported
	dg-note by generic dg-message.

2021-10-09  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-10-09  Jakub Jelinek  <jakub@redhat.com>

	* c-c++-common/gomp/sections1.c (foo): Don't expect errors on
	multiple statements in between section directive(s).  Add testcases
	for invalid no statements in between section directive(s).
	* gcc.dg/gomp/sections-2.c (foo): Don't expect errors on
	multiple statements in between section directive(s).
	* g++.dg/gomp/sections-2.C (foo): Likewise.
	* g++.dg/gomp/attrs-6.C (foo): Add testcases for multiple
	statements in between section directive(s).
	(bar): Add testcases for multiple statements in between scan
	directive.
	* g++.dg/gomp/attrs-7.C (bar): Adjust expected error recovery.

2021-10-08  Sandra Loosemore  <sandra@codesourcery.com>

	Backport from master:
	2021-10-08  Sandra Loosemore  <sandra@codesourcery.com>

	PR fortran/54753
	* gfortran.dg/c-interop/c535c-1.f90: Rewrite and expand.
	* gfortran.dg/c-interop/c535c-2.f90: Remove xfails.
	* gfortran.dg/c-interop/c535c-3.f90: Likewise.
	* gfortran.dg/c-interop/c535c-4.f90: Likewise.
	* gfortran.dg/PR94110.f90: Extend to cover class types.

2021-10-08  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-10-08  Jakub Jelinek  <jakub@redhat.com>

	PR c++/102640
	* c-c++-common/gomp/pr102640.c: New test.

2021-10-06  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-10-05  Tobias Burnus  <tobias@codesourcery.com>

	* gfortran.dg/gomp/pr43711.f90: Add dg-error + dg-prune-output,
	remove dg-excess-errors to change XFAIL to PASS.

2021-10-01  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-10-01  Jakub Jelinek  <jakub@redhat.com>

	* gfortran.dg/gomp/order-5.f90: Adjust scan-tree-dump-times regexps.

2021-09-30  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-09-30  Tobias Burnus  <tobias@codesourcery.com>

	PR fortran/71703
	PR fortran/84007
	* gfortran.dg/c-interop/c535b-1.f90: Remove wrong comment.
	* gfortran.dg/unlimited_polymorphic_1.f03: Extend.
	* gfortran.dg/unlimited_polymorphic_32.f90: New test.

2021-09-29  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-09-29  Jakub Jelinek  <jakub@redhat.com>

	PR middle-end/102504
	* c-c++-common/gomp/scope-4.c: New test.

2021-09-28  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-09-28  Tobias Burnus  <tobias@codesourcery.com>

	PR fortran/102500
	* gfortran.dg/include_15.f90: Add 'dg-prune-output' to prune
	-Wmissing-include-dirs output printed or not depending on
	how the testsuite is run.

2021-09-28  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-09-28  Jakub Jelinek  <jakub@redhat.com>

	PR middle-end/102492
	* g++.dg/gomp/simd-3.C: New test.

2021-09-27  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-09-27  Tobias Burnus  <tobias@codesourcery.com>

	PR fortran/94070
	* gfortran.dg/c-interop/cf-out-descriptor-6.f90: Remove xfail.
	* gfortran.dg/c-interop/size.f90: Remove xfail.
	* gfortran.dg/intrinsic_size_3.f90: Update scan-tree-dump-times.
	* gfortran.dg/transpose_optimization_2.f90: Likewise.
	* gfortran.dg/size_optional_dim_1.f90: Add scan-tree-dump-not.
	* gfortran.dg/assumed_rank_22.f90: New test.
	* gfortran.dg/assumed_rank_22_aux.c: New test.

2021-09-26  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-09-26  Tobias Burnus  <tobias@codesourcery.com>

	PR fortran/101334
	* gfortran.dg/associated_assumed_rank.f90: New test.

2021-09-24  Sandra Loosemore  <sandra@codesourcery.com>

	Backported from master:
	2021-09-24  Sandra Loosemore  <sandra@codesourcery.com>

	PR fortran/101333
	* gfortran.dg/c-interop/c407c-1.f90: Remove xfails.

2021-09-24  Sandra Loosemore  <sandra@codesourcery.com>

	Backported from master:
	2021-09-23  Sandra Loosemore  <sandra@codesourcery.com>

	PR fortran/101320
	* gfortran.dg/c-interop/c516.f90: Remove xfails.  Add more
	tests.

2021-09-23  Tobias Burnus  <tobias@codesourcery.com>

	2021-09-23  Jakub Jelinek  <jakub@redhat.com>

	PR c++/102413
	* g++.dg/gomp/attrs-14.C: New test.

2021-09-23  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-08-12  Jakub Jelinek  <jakub@redhat.com>

	* g++.dg/lookup/strong-using.C: Add test using [[gnu::strong]]
	as well.
	* g++.dg/lookup/strong-using2.C: Likewise.
	* g++.dg/cpp0x/gen-attrs-58.C: Move alignas(int) before
	using namespace.
	* g++.dg/cpp0x/gen-attrs-59.C: Move alignas(X) before
	using namespace, add tests for alignas before semicolon.
	* g++.dg/cpp0x/gen-attrs-76.C: Remove xfails.  Add test for
	C++11 attributes on using directive before semicolon.

2021-09-22  Sandra Loosemore  <sandra@codesourcery.com>

	Backported from master:
	2021-09-22  Sandra Loosemore  <sandra@codesourcery.com>

	PR fortran/101319
	* gfortran.dg/c-interop/assumed-type-dummy.f90: Remove xfail.

2021-09-22  Sandra Loosemore  <sandra@codesourcery.com>

	Backported from master:
	2021-09-19  Sandra Loosemore  <sandra@codesourcery.com>

	PR fortran/101334
	* gfortran.dg/c-interop/c535b-2.f90: Remove xfails.
	* gfortran.dg/c-interop/c535b-3.f90: Likewise.

2021-09-22  Sandra Loosemore  <sandra@codesourcery.com>

	Backported from master:
	2021-09-19  Sandra Loosemore  <sandra@codesourcery.com>

	* gfortran.dg/assumed_rank_18.f90 (g): Wrap call to h in
	select rank.
	* gfortran.dg/assumed_type_10.f90 (test_array): Likewise for
	call to test_lib.
	* gfortran.dg/assumed_type_11.f90 (test_array): Likewise.

2021-09-22  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-09-22  Tobias Burnus  <tobias@codesourcery.com>

	PR fortran/55534
	* gfortran.dg/include_14.f90: Add -J testcase and update dg-output.
	* gfortran.dg/include_15.f90: Likewise.
	* gfortran.dg/include_16.f90: Likewise.
	* gfortran.dg/include_17.f90: Likewise.
	* gfortran.dg/include_18.f90: Likewise.
	* gfortran.dg/include_19.f90: Likewise.

2021-09-22  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-09-22  Jakub Jelinek  <jakub@redhat.com>

	PR middle-end/102415
	* c-c++-common/gomp/scope-3.c: New test.

2021-09-22  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-09-22  Jakub Jelinek  <jakub@redhat.com>

	* c-c++-common/gomp/allocate-6.c: New test.
	* c-c++-common/gomp/allocate-7.c: New test.
	* g++.dg/gomp/allocate-4.C: New test.

2021-09-21  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-09-21  Tobias Burnus  <tobias@codesourcery.com>

	PR fortran/55534
	* gfortran.dg/include_6.f90: Change dg-error to
	dg-warning and update pattern.
	* gfortran.dg/include_14.f90: New test.
	* gfortran.dg/include_15.f90: New test.
	* gfortran.dg/include_16.f90: New test.
	* gfortran.dg/include_17.f90: New test.
	* gfortran.dg/include_18.f90: New test.
	* gfortran.dg/include_19.f90: New test.
	* gfortran.dg/include_20.f90: New test.
	* gfortran.dg/include_21.f90: New test.

2021-09-20  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-09-20  Tobias Burnus  <tobias@codesourcery.com>

	* gfortran.dg/gomp/order-5.f90: New test.
	* gfortran.dg/gomp/order-6.f90: New test.
	* gfortran.dg/gomp/order-7.f90: New test.
	* gfortran.dg/gomp/order-8.f90: New test.
	* gfortran.dg/gomp/order-9.f90: New test.

2021-09-20  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-09-18  Jakub Jelinek  <jakub@redhat.com>

	* c-c++-common/gomp/order-1.c (f2): Add tests for distribute
	with order clause.
	(f3): Remove.
	* c-c++-common/gomp/order-2.c: Don't expect error for distribute
	with order clause.
	* c-c++-common/gomp/order-5.c: New test.
	* c-c++-common/gomp/order-6.c: New test.
	* c-c++-common/gomp/clause-dups-1.c (f1): Add tests for
	duplicated order clause.
	(f9): New function.
	* c-c++-common/gomp/clauses-1.c (baz, bar): Don't mix copyin and
	order(concurrent) clauses on the same composite construct combined
	with distribute, instead split it into two tests, one without
	copyin and one without order(concurrent).  Add order(concurrent)
	clauses to {,{,target} teams} distribute.
	* g++.dg/gomp/attrs-1.C (baz, bar): Likewise.
	* g++.dg/gomp/attrs-2.C (baz, bar): Likewise.

2021-09-20  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-09-18  Jakub Jelinek  <jakub@redhat.com>

	* c-c++-common/gomp/default-2.c: New test.
	* c-c++-common/gomp/default-3.c: New test.
	* g++.dg/gomp/default-1.C: New test.

2021-09-17  Sandra Loosemore  <sandra@codesourcery.com>

	Backported from master:
	2021-06-05  José Rui Faustino de Sousa  <jrfsousa@gmail.com>

	PR fortran/100120
	PR fortran/100816
	PR fortran/100818
	PR fortran/100819
	PR fortran/100821
	* gfortran.dg/PR100120.f90: New test.
	* gfortran.dg/character_workout_1.f90: New test.
	* gfortran.dg/character_workout_4.f90: New test.

2021-09-17  Sandra Loosemore  <sandra@codesourcery.com>

	Backported from master:
	2021-09-17  Sandra Loosemore  <sandra@codesourcery.com>

	* gfortran.dg/PR100914.c: Do not include quadmath.h.  Use
	_Float128 _Complex instead of __complex128.
	* gfortran.dg/PR100914.f90: Add -Wno-pedantic to suppress error
	about use of _Float128.
	* gfortran.dg/c-interop/typecodes-array-float128-c.c: Use
	_Float128 instead of __float128.
	* gfortran.dg/c-interop/typecodes-sanity-c.c: Likewise.
	* gfortran.dg/c-interop/typecodes-scalar-float128-c.c: Likewise.
	* lib/target-supports.exp 
	(check_effective_target_fortran_real_c_float128): Update comments.

2021-09-17  Sandra Loosemore  <sandra@codesourcery.com>

	Backported from master:
	2021-09-02  Sandra Loosemore  <sandra@codesourcery.com>

	* gfortran.dg/c-interop/allocatable-dummy-c.c: New file.
	* gfortran.dg/c-interop/allocatable-dummy.f90: New file.
	* gfortran.dg/c-interop/allocatable-optional-pointer.f90: New file.
	* gfortran.dg/c-interop/allocate-c.c: New file.
	* gfortran.dg/c-interop/allocate-errors-c.c: New file.
	* gfortran.dg/c-interop/allocate-errors.f90: New file.
	* gfortran.dg/c-interop/allocate.f90: New file.
	* gfortran.dg/c-interop/argument-association-assumed-rank-1.f90:
	New file.
	* gfortran.dg/c-interop/argument-association-assumed-rank-2.f90:
	New file.
	* gfortran.dg/c-interop/argument-association-assumed-rank-3.f90:
	New file.
	* gfortran.dg/c-interop/argument-association-assumed-rank-4.f90:
	New file.
	* gfortran.dg/c-interop/argument-association-assumed-rank-5.f90:
	New file.
	* gfortran.dg/c-interop/argument-association-assumed-rank-6.f90:
	New file.
	* gfortran.dg/c-interop/argument-association-assumed-rank-7.f90:
	New file.
	* gfortran.dg/c-interop/argument-association-assumed-rank-8.f90:
	New file.
	* gfortran.dg/c-interop/assumed-type-dummy.f90: New file.
	* gfortran.dg/c-interop/c-interop.exp: New file.
	* gfortran.dg/c-interop/c1255-1.f90: New file.
	* gfortran.dg/c-interop/c1255-2.f90: New file.
	* gfortran.dg/c-interop/c1255a.f90: New file.
	* gfortran.dg/c-interop/c407a-1.f90: New file.
	* gfortran.dg/c-interop/c407a-2.f90: New file.
	* gfortran.dg/c-interop/c407b-1.f90: New file.
	* gfortran.dg/c-interop/c407b-2.f90: New file.
	* gfortran.dg/c-interop/c407c-1.f90: New file.
	* gfortran.dg/c-interop/c516.f90: New file.
	* gfortran.dg/c-interop/c524a.f90: New file.
	* gfortran.dg/c-interop/c535a-1.f90: New file.
	* gfortran.dg/c-interop/c535a-2.f90: New file.
	* gfortran.dg/c-interop/c535b-1.f90: New file.
	* gfortran.dg/c-interop/c535b-2.f90: New file.
	* gfortran.dg/c-interop/c535b-3.f90: New file.
	* gfortran.dg/c-interop/c535c-1.f90: New file.
	* gfortran.dg/c-interop/c535c-2.f90: New file.
	* gfortran.dg/c-interop/c535c-3.f90: New file.
	* gfortran.dg/c-interop/c535c-4.f90: New file.
	* gfortran.dg/c-interop/cf-descriptor-1-c.c: New file.
	* gfortran.dg/c-interop/cf-descriptor-1.f90: New file.
	* gfortran.dg/c-interop/cf-descriptor-2-c.c: New file.
	* gfortran.dg/c-interop/cf-descriptor-2.f90: New file.
	* gfortran.dg/c-interop/cf-descriptor-3-c.c: New file.
	* gfortran.dg/c-interop/cf-descriptor-3.f90: New file.
	* gfortran.dg/c-interop/cf-descriptor-4-c.c: New file.
	* gfortran.dg/c-interop/cf-descriptor-4.f90: New file.
	* gfortran.dg/c-interop/cf-descriptor-5-c.c: New file.
	* gfortran.dg/c-interop/cf-descriptor-5.f90: New file.
	* gfortran.dg/c-interop/cf-descriptor-6-c.c: New file.
	* gfortran.dg/c-interop/cf-descriptor-6.f90: New file.
	* gfortran.dg/c-interop/cf-descriptor-7-c.c: New file.
	* gfortran.dg/c-interop/cf-descriptor-7.f90: New file.
	* gfortran.dg/c-interop/cf-descriptor-8-c.c: New file.
	* gfortran.dg/c-interop/cf-descriptor-8.f90: New file.
	* gfortran.dg/c-interop/cf-out-descriptor-1-c.c: New file.
	* gfortran.dg/c-interop/cf-out-descriptor-1.f90: New file.
	* gfortran.dg/c-interop/cf-out-descriptor-2-c.c: New file.
	* gfortran.dg/c-interop/cf-out-descriptor-2.f90: New file.
	* gfortran.dg/c-interop/cf-out-descriptor-3-c.c: New file.
	* gfortran.dg/c-interop/cf-out-descriptor-3.f90: New file.
	* gfortran.dg/c-interop/cf-out-descriptor-4-c.c: New file.
	* gfortran.dg/c-interop/cf-out-descriptor-4.f90: New file.
	* gfortran.dg/c-interop/cf-out-descriptor-5-c.c: New file.
	* gfortran.dg/c-interop/cf-out-descriptor-5.f90: New file.
	* gfortran.dg/c-interop/cf-out-descriptor-6-c.c: New file.
	* gfortran.dg/c-interop/cf-out-descriptor-6.f90: New file.
	* gfortran.dg/c-interop/contiguous-1-c.c: New file.
	* gfortran.dg/c-interop/contiguous-1.f90: New file.
	* gfortran.dg/c-interop/contiguous-2-c.c: New file.
	* gfortran.dg/c-interop/contiguous-2.f90: New file.
	* gfortran.dg/c-interop/contiguous-3-c.c: New file.
	* gfortran.dg/c-interop/contiguous-3.f90: New file.
	* gfortran.dg/c-interop/deferred-character-1.f90: New file.
	* gfortran.dg/c-interop/deferred-character-2.f90: New file.
	* gfortran.dg/c-interop/dump-descriptors.c: New file.
	* gfortran.dg/c-interop/dump-descriptors.h: New file.
	* gfortran.dg/c-interop/establish-c.c: New file.
	* gfortran.dg/c-interop/establish-errors-c.c: New file.
	* gfortran.dg/c-interop/establish-errors.f90: New file.
	* gfortran.dg/c-interop/establish.f90: New file.
	* gfortran.dg/c-interop/explicit-interface.f90: New file.
	* gfortran.dg/c-interop/fc-descriptor-1-c.c: New file.
	* gfortran.dg/c-interop/fc-descriptor-1.f90: New file.
	* gfortran.dg/c-interop/fc-descriptor-2-c.c: New file.
	* gfortran.dg/c-interop/fc-descriptor-2.f90: New file.
	* gfortran.dg/c-interop/fc-descriptor-3-c.c: New file.
	* gfortran.dg/c-interop/fc-descriptor-3.f90: New file.
	* gfortran.dg/c-interop/fc-descriptor-4-c.c: New file.
	* gfortran.dg/c-interop/fc-descriptor-4.f90: New file.
	* gfortran.dg/c-interop/fc-descriptor-5-c.c: New file.
	* gfortran.dg/c-interop/fc-descriptor-5.f90: New file.
	* gfortran.dg/c-interop/fc-descriptor-6-c.c: New file.
	* gfortran.dg/c-interop/fc-descriptor-6.f90: New file.
	* gfortran.dg/c-interop/fc-descriptor-7-c.c: New file.
	* gfortran.dg/c-interop/fc-descriptor-7.f90: New file.
	* gfortran.dg/c-interop/fc-descriptor-8-c.c: New file.
	* gfortran.dg/c-interop/fc-descriptor-8.f90: New file.
	* gfortran.dg/c-interop/fc-descriptor-9-c.c: New file.
	* gfortran.dg/c-interop/fc-descriptor-9.f90: New file.
	* gfortran.dg/c-interop/fc-out-descriptor-1-c.c: New file.
	* gfortran.dg/c-interop/fc-out-descriptor-1.f90: New file.
	* gfortran.dg/c-interop/fc-out-descriptor-2-c.c: New file.
	* gfortran.dg/c-interop/fc-out-descriptor-2.f90: New file.
	* gfortran.dg/c-interop/fc-out-descriptor-3-c.c: New file.
	* gfortran.dg/c-interop/fc-out-descriptor-3.f90: New file.
	* gfortran.dg/c-interop/fc-out-descriptor-4-c.c: New file.
	* gfortran.dg/c-interop/fc-out-descriptor-4.f90: New file.
	* gfortran.dg/c-interop/fc-out-descriptor-5-c.c: New file.
	* gfortran.dg/c-interop/fc-out-descriptor-5.f90: New file.
	* gfortran.dg/c-interop/fc-out-descriptor-6-c.c: New file.
	* gfortran.dg/c-interop/fc-out-descriptor-6.f90: New file.
	* gfortran.dg/c-interop/fc-out-descriptor-7-c.c: New file.
	* gfortran.dg/c-interop/fc-out-descriptor-7.f90: New file.
	* gfortran.dg/c-interop/ff-descriptor-1.f90: New file.
	* gfortran.dg/c-interop/ff-descriptor-2.f90: New file.
	* gfortran.dg/c-interop/ff-descriptor-3.f90: New file.
	* gfortran.dg/c-interop/ff-descriptor-4.f90: New file.
	* gfortran.dg/c-interop/ff-descriptor-5.f90: New file.
	* gfortran.dg/c-interop/ff-descriptor-6.f90: New file.
	* gfortran.dg/c-interop/ff-descriptor-7.f90: New file.
	* gfortran.dg/c-interop/note-5-3.f90: New file.
	* gfortran.dg/c-interop/note-5-4-c.c: New file.
	* gfortran.dg/c-interop/note-5-4.f90: New file.
	* gfortran.dg/c-interop/optional-c.c: New file.
	* gfortran.dg/c-interop/optional.f90: New file.
	* gfortran.dg/c-interop/rank-class.f90: New file.
	* gfortran.dg/c-interop/rank.f90: New file.
	* gfortran.dg/c-interop/removed-restrictions-1.f90: New file.
	* gfortran.dg/c-interop/removed-restrictions-2.f90: New file.
	* gfortran.dg/c-interop/removed-restrictions-3.f90: New file.
	* gfortran.dg/c-interop/removed-restrictions-4.f90: New file.
	* gfortran.dg/c-interop/section-1-c.c: New file.
	* gfortran.dg/c-interop/section-1.f90: New file.
	* gfortran.dg/c-interop/section-1p.f90: New file.
	* gfortran.dg/c-interop/section-2-c.c: New file.
	* gfortran.dg/c-interop/section-2.f90: New file.
	* gfortran.dg/c-interop/section-2p.f90: New file.
	* gfortran.dg/c-interop/section-3-c.c: New file.
	* gfortran.dg/c-interop/section-3.f90: New file.
	* gfortran.dg/c-interop/section-3p.f90: New file.
	* gfortran.dg/c-interop/section-4-c.c: New file.
	* gfortran.dg/c-interop/section-4.f90: New file.
	* gfortran.dg/c-interop/section-errors-c.c: New file.
	* gfortran.dg/c-interop/section-errors.f90: New file.
	* gfortran.dg/c-interop/select-c.c: New file.
	* gfortran.dg/c-interop/select-errors-c.c: New file.
	* gfortran.dg/c-interop/select-errors.f90: New file.
	* gfortran.dg/c-interop/select.f90: New file.
	* gfortran.dg/c-interop/setpointer-c.c: New file.
	* gfortran.dg/c-interop/setpointer-errors-c.c: New file.
	* gfortran.dg/c-interop/setpointer-errors.f90: New file.
	* gfortran.dg/c-interop/setpointer.f90: New file.
	* gfortran.dg/c-interop/shape.f90: New file.
	* gfortran.dg/c-interop/size.f90: New file.
	* gfortran.dg/c-interop/tkr.f90: New file.
	* gfortran.dg/c-interop/typecodes-array-basic-c.c: New file.
	* gfortran.dg/c-interop/typecodes-array-basic.f90: New file.
	* gfortran.dg/c-interop/typecodes-array-char-c.c: New file.
	* gfortran.dg/c-interop/typecodes-array-char.f90: New file.
	* gfortran.dg/c-interop/typecodes-array-float128-c.c: New file.
	* gfortran.dg/c-interop/typecodes-array-float128.f90: New file.
	* gfortran.dg/c-interop/typecodes-array-int128-c.c: New file.
	* gfortran.dg/c-interop/typecodes-array-int128.f90: New file.
	* gfortran.dg/c-interop/typecodes-array-longdouble-c.c: New file.
	* gfortran.dg/c-interop/typecodes-array-longdouble.f90: New file.
	* gfortran.dg/c-interop/typecodes-sanity-c.c: New file.
	* gfortran.dg/c-interop/typecodes-sanity.f90: New file.
	* gfortran.dg/c-interop/typecodes-scalar-basic-c.c: New file.
	* gfortran.dg/c-interop/typecodes-scalar-basic.f90: New file.
	* gfortran.dg/c-interop/typecodes-scalar-float128-c.c: New file.
	* gfortran.dg/c-interop/typecodes-scalar-float128.f90: New file.
	* gfortran.dg/c-interop/typecodes-scalar-int128-c.c: New file.
	* gfortran.dg/c-interop/typecodes-scalar-int128.f90: New file.
	* gfortran.dg/c-interop/typecodes-scalar-longdouble-c.c: New file.
	* gfortran.dg/c-interop/typecodes-scalar-longdouble.f90: New file.
	* gfortran.dg/c-interop/ubound.f90: New file.
	* lib/target-supports.exp
	(check_effective_target_fortran_real_c_float128): New function.

2021-09-17  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-09-17  Jakub Jelinek  <jakub@redhat.com>

	* c-c++-common/gomp/atomic-18.c: Expect same diagnostics in C++ as in
	C.
	* c-c++-common/gomp/atomic-25.c: Drop c effective target.
	* c-c++-common/gomp/atomic-26.c: Likewise.
	* c-c++-common/gomp/atomic-27.c: Likewise.
	* c-c++-common/gomp/atomic-28.c: Likewise.
	* c-c++-common/gomp/atomic-29.c: Likewise.
	* c-c++-common/gomp/atomic-30.c: Likewise.  Adjust expected diagnostics
	for C++ when it differs from C.
	(foo): Change return type from double to void.
	* g++.dg/gomp/atomic-5.C: Adjust expected diagnostics wording.
	* g++.dg/gomp/atomic-20.C: New test.

2021-09-17  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-09-15  Thomas Schwinge  <thomas@codesourcery.com>

	* gfortran.dg/goacc/unexpected-end.f90: Add OpenACC 'host_data'
	testing.

2021-09-14  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-09-14  Tobias Burnus  <tobias@codesourcery.com>

	PR fortran/102313
	* gfortran.dg/goacc/unexpected-end.f90: New test.
	* gfortran.dg/gomp/unexpected-end.f90: New test.

2021-09-14  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-09-14  Jakub Jelinek  <jakub@redhat.com>

	* c-c++-common/gomp/atomic-29.c: Add -march=pentium
	dg-additional-options for ia32.  Use sync_long_long effective target
	instead of sync_int_long.
	* lib/target-supports.exp (check_effective_target_sync_long_long): Fix
	a syntax error.

2021-09-13  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-09-01  Sandra Loosemore  <sandra@codesourcery.com>
		    José Rui Faustino de Sousa  <jrfsousa@gmail.com>

	PR fortran/100911
	PR fortran/100915
	PR fortran/100916
	* gfortran.dg/PR100911.c: New file.
	* gfortran.dg/PR100911.f90: New file.
	* gfortran.dg/PR100914.c: New file.
	* gfortran.dg/PR100914.f90: New file.
	* gfortran.dg/PR100915.c: New file.
	* gfortran.dg/PR100915.f90: New file.

2021-09-13  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-09-10  Jakub Jelinek  <jakub@redhat.com>

	* c-c++-common/gomp/atomic-17.c (foo): Add tests for atomic read,
	write or update with acq_rel clause and atomic update with acquire clause.
	* c-c++-common/gomp/atomic-18.c (foo): Adjust expected diagnostics
	wording, remove tests moved to atomic-17.c.
	* c-c++-common/gomp/atomic-21.c: Expect only 2 omp atomic release and
	2 omp atomic acq_rel directives instead of 4 omp atomic release.
	* c-c++-common/gomp/atomic-25.c: New test.
	* c-c++-common/gomp/atomic-26.c: New test.
	* c-c++-common/gomp/atomic-27.c: New test.
	* c-c++-common/gomp/atomic-28.c: New test.
	* c-c++-common/gomp/atomic-29.c: New test.
	* c-c++-common/gomp/atomic-30.c: New test.
	* c-c++-common/goacc-gomp/atomic.c: Expect 1 omp atomic release and
	1 omp atomic_acq_rel instead of 2 omp atomic release directives.
	* gcc.dg/gomp/atomic-5.c: Adjust expected error diagnostic wording.
	* g++.dg/gomp/atomic-18.C:Expect 4 omp atomic release and
	1 omp atomic_acq_rel instead of 5 omp atomic release directives.

2021-09-13  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-09-03  Tobias Burnus  <tobias@codesourcery.com>

	* gfortran.dg/bind_c_char_6.f90: Update dg-error.
	* gfortran.dg/bind_c_char_7.f90: Likewise.
	* gfortran.dg/bind_c_char_8.f90: Likewise.
	* gfortran.dg/iso_c_binding_char_1.f90: Likewise.
	* gfortran.dg/pr32599.f03: Likewise.
	* gfortran.dg/bind_c_char_9.f90: Comment testcase bits which are
	implementable but not valid F2018.
	* gfortran.dg/bind_c_contiguous.f90: New test.

2021-08-23  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-08-23  Tobias Burnus  <tobias@codesourcery.com>

	* gfortran.dg/goacc/asyncwait-1.f95: Update dg-error.
	* gfortran.dg/goacc/default-2.f: Update dg-error.
	* gfortran.dg/goacc/enter-exit-data.f95: Update dg-error.
	* gfortran.dg/goacc/if.f95: Update dg-error.
	* gfortran.dg/goacc/parallel-kernels-clauses.f95: Update dg-error.
	* gfortran.dg/goacc/routine-6.f90: Update dg-error.
	* gfortran.dg/goacc/sie.f95: Update dg-error.
	* gfortran.dg/goacc/update-if_present-2.f90: Update dg-error.
	* gfortran.dg/gomp/cancel-2.f90: Update dg-error.
	* gfortran.dg/gomp/declare-simd-1.f90: Update dg-error.
	* gfortran.dg/gomp/error-3.f90: Update dg-error.
	* gfortran.dg/gomp/loop-2.f90: Update dg-error.
	* gfortran.dg/gomp/masked-2.f90: Update dg-error.

2021-08-20  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-08-20  Tobias Burnus  <tobias@codesourcery.com>

	* gfortran.dg/gomp/error-1.f90: New test.
	* gfortran.dg/gomp/error-2.f90: New test.
	* gfortran.dg/gomp/error-3.f90: New test.

2021-08-20  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-08-20  Jakub Jelinek  <jakub@redhat.com>

	* c-c++-common/gomp/error-1.c: New test.
	* c-c++-common/gomp/error-2.c: New test.
	* c-c++-common/gomp/error-3.c: New test.
	* g++.dg/gomp/attrs-1.C (bar): Add error directive test.
	* g++.dg/gomp/attrs-2.C (bar): Add error directive test.
	* g++.dg/gomp/attrs-13.C: New test.
	* g++.dg/gomp/error-1.C: New test.

2021-08-20  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-08-20  Jakub Jelinek  <jakub@redhat.com>

	* c-c++-common/gomp/sink-5.c: New test.
	* c-c++-common/gomp/requires-3.c: Add test for spurious comma
	at the end of pragma line.

2021-08-11  Sandra Loosemore  <sandra@codesourcery.com>

	Backported from master:

	2021-08-10  Tobias Burnus  <tobias@codesourcery.com>

	PR libfortran/101305
	PR fortran/101660
	PR testsuite/101847

	* lib/gfortran.exp (gfortran_init): Remove -I$specpath/libgfortran
	from the string used to set GFORTRAN_UNDER_TEST.

2021-08-11  Sandra Loosemore  <sandra@codesourcery.com>

	Backported from master:

	2021-08-09  Tobias Burnus  <tobias@codesourcery.com>

	PR libfortran/101305
	PR fortran/101660
	* lib/gfortran.exp (gfortran_init): Add -I $specdir/libgfortran to
	GFORTRAN_UNDER_TEST; update it when set by previous gfortran_init call.
	* gfortran.dg/ISO_Fortran_binding_1.c: Use <...> not "..." for
	ISO_Fortran_binding.h's #include.
	* gfortran.dg/ISO_Fortran_binding_10.c: Likewise.
	* gfortran.dg/ISO_Fortran_binding_11.c: Likewise.
	* gfortran.dg/ISO_Fortran_binding_12.c: Likewise.
	* gfortran.dg/ISO_Fortran_binding_15.c: Likewise.
	* gfortran.dg/ISO_Fortran_binding_16.c: Likewise.
	* gfortran.dg/ISO_Fortran_binding_17.c: Likewise.
	* gfortran.dg/ISO_Fortran_binding_18.c: Likewise.
	* gfortran.dg/ISO_Fortran_binding_3.c: Likewise.
	* gfortran.dg/ISO_Fortran_binding_5.c: Likewise.
	* gfortran.dg/ISO_Fortran_binding_6.c: Likewise.
	* gfortran.dg/ISO_Fortran_binding_7.c: Likewise.
	* gfortran.dg/ISO_Fortran_binding_8.c: Likewise.
	* gfortran.dg/ISO_Fortran_binding_9.c: Likewise.
	* gfortran.dg/PR94327.c: Likewise.
	* gfortran.dg/PR94331.c: Likewise.
	* gfortran.dg/bind_c_array_params_3_aux.c: Likewise.
	* gfortran.dg/iso_fortran_binding_uint8_array_driver.c: Likewise.
	* gfortran.dg/pr93524.c: Likewise.

2021-08-11  Sandra Loosemore  <sandra@codesourcery.com>

	Backported from master:

	2021-07-24  Sandra Loosemore  <sandra@codesourcery.com>

	PR libfortran/101317
	* gfortran.dg/ISO_Fortran_binding_17.f90: Fix typo in error
	message patterns.

2021-08-11  Sandra Loosemore  <sandra@codesourcery.com>

	Backported from master:

	2021-07-17  Sandra Loosemore  <sandra@codesourcery.com>

	PR libfortran/101310
	* gfortran.dg/ISO_Fortran_binding_1.c (section_c): Remove
	incorrect assertions.

2021-08-11  Sandra Loosemore  <sandra@codesourcery.com>

	Backported from master:

	2021-07-27  Sandra Loosemore  <sandra@codesourcery.com>

	PR libfortran/101305
	* gfortran.dg/ISO_Fortran_binding_1.c: Adjust include path.
	* gfortran.dg/ISO_Fortran_binding_10.c: Likewise.
	* gfortran.dg/ISO_Fortran_binding_11.c: Likewise.
	* gfortran.dg/ISO_Fortran_binding_12.c: Likewise.
	* gfortran.dg/ISO_Fortran_binding_15.c: Likewise.
	* gfortran.dg/ISO_Fortran_binding_16.c: Likewise.
	* gfortran.dg/ISO_Fortran_binding_17.c: Likewise.
	* gfortran.dg/ISO_Fortran_binding_18.c: Likewise.
	* gfortran.dg/ISO_Fortran_binding_3.c: Likewise.
	* gfortran.dg/ISO_Fortran_binding_5.c: Likewise.
	* gfortran.dg/ISO_Fortran_binding_6.c: Likewise.
	* gfortran.dg/ISO_Fortran_binding_7.c: Likewise.
	* gfortran.dg/ISO_Fortran_binding_8.c: Likewise.
	* gfortran.dg/ISO_Fortran_binding_9.c: Likewise.
	* gfortran.dg/PR94327.c: Likewise.
	* gfortran.dg/PR94331.c: Likewise.
	* gfortran.dg/bind_c_array_params_3_aux.c: Likewise.
	* gfortran.dg/iso_fortran_binding_uint8_array_driver.c: Likewise.
	* gfortran.dg/pr93524.c: Likewise.

2021-08-11  Sandra Loosemore  <sandra@codesourcery.com>

	Backported from master:
	2021-05-06  Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/46691
	PR fortran/99819
	* gfortran.dg/class_dummy_6.f90: New test.
	* gfortran.dg/class_dummy_7.f90: New test.

2021-08-19  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-08-19  Jakub Jelinek  <jakub@redhat.com>

	* c-c++-common/gomp/requires-3.c: Add testcase for
	atomic_default_mem_order ( at the end of line without corresponding ).

2021-08-19  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-08-19  Jakub Jelinek  <jakub@redhat.com>

	* c-c++-common/gomp/nothing-2.c: New test.

2021-08-19  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-08-18  Tobias Burnus  <tobias@codesourcery.com>

	PR testsuite/101963
	* gfortran.dg/nothing-1.f90: Moved to ...
	* gfortran.dg/gomp/nothing-1.f90: ... here.
	* gfortran.dg/nothing-2.f90: Moved to ...
	* gfortran.dg/gomp/nothing-2.f90: ... here;
	avoid $ issue in $OMP in dg-error.

2021-08-18  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-08-18  Tobias Burnus  <tobias@codesourcery.com>

	* gfortran.dg/nothing-1.f90: New test.
	* gfortran.dg/nothing-2.f90: New test.

2021-08-18  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-08-18  Jakub Jelinek  <jakub@redhat.com>

	* c-c++-common/gomp/nothing-1.c: New test.
	* g++.dg/gomp/attrs-1.C (bar): Add nothing directive test.
	* g++.dg/gomp/attrs-2.C (bar): Likewise.
	* g++.dg/gomp/attrs-9.C: Likewise.

2021-08-18  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-08-18  Jakub Jelinek  <jakub@redhat.com>

	* c-c++-common/gomp/pr63326.c: Don't expect extra "before" errors
	in C++.
	* g++.dg/gomp/attrs-7.C: Don't expect one extra error.
	* g++.dg/gomp/barrier-2.C: Likewise.
	* gcc.dg/gomp/declare-simd-5.c: Likewise.
	* gcc.dg/gomp/barrier-2.c: Likewise.
	* gcc.dg/gomp/declare-variant-2.c: Likewise.

2021-08-17  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-08-17  Tobias Burnus  <tobias@codesourcery.com>

	* gfortran.dg/gomp/scan-1.f90:
	* gfortran.dg/gomp/cancel-1.f90: New test.
	* gfortran.dg/gomp/cancel-4.f90: New test.
	* gfortran.dg/gomp/loop-4.f90: New test.
	* gfortran.dg/gomp/nesting-1.f90: New test.
	* gfortran.dg/gomp/nesting-2.f90: New test.
	* gfortran.dg/gomp/nesting-3.f90: New test.
	* gfortran.dg/gomp/nowait-1.f90: New test.
	* gfortran.dg/gomp/reduction-task-1.f90: New test.
	* gfortran.dg/gomp/reduction-task-2.f90: New test.
	* gfortran.dg/gomp/reduction-task-2a.f90: New test.
	* gfortran.dg/gomp/reduction-task-3.f90: New test.
	* gfortran.dg/gomp/scope-1.f90: New test.
	* gfortran.dg/gomp/scope-2.f90: New test.

2021-08-17  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-08-17  Jakub Jelinek  <jakub@redhat.com>

	* c-c++-common/gomp/nesting-2.c (foo): Add scope and masked
	construct tests.
	* c-c++-common/gomp/scan-1.c (f3): Add scope construct test..
	* c-c++-common/gomp/cancel-1.c (f2): Add scope and masked
	construct tests.
	* c-c++-common/gomp/reduction-task-2.c (bar): Add scope construct
	test.  Adjust diagnostics for the addition of scope.
	* c-c++-common/gomp/loop-1.c (f5): Add master, masked and scope
	construct tests.
	* c-c++-common/gomp/clause-dups-1.c (f1): Add scope construct test.
	* gcc.dg/gomp/nesting-1.c (f1, f2, f3): Add scope construct tests.
	* c-c++-common/gomp/scope-1.c: New test.
	* c-c++-common/gomp/scope-2.c: New test.
	* g++.dg/gomp/attrs-1.C (bar): Add scope construct tests.
	* g++.dg/gomp/attrs-2.C (bar): Likewise.
	* gfortran.dg/gomp/reduction4.f90: Adjust expected diagnostics.
	* gfortran.dg/gomp/reduction7.f90: Likewise.

2021-08-16  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-08-16  Tobias Burnus  <tobias@codesourcery.com>

	* gfortran.dg/gomp/masked-1.f90: New test.
	* gfortran.dg/gomp/masked-2.f90: New test.
	* gfortran.dg/gomp/masked-3.f90: New test.
	* gfortran.dg/gomp/masked-combined-1.f90: New test.
	* gfortran.dg/gomp/masked-combined-2.f90: New test.

2021-08-16  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-08-12  Jakub Jelinek  <jakub@redhat.com>

	* c-c++-common/gomp/clauses-1.c (bar): Add tests for combined masked
	constructs with clauses.
	* c-c++-common/gomp/clauses-5.c (foo): Add testcase for filter clause.
	* c-c++-common/gomp/clause-dups-1.c (f1): Likewise.
	* c-c++-common/gomp/masked-1.c: New test.
	* c-c++-common/gomp/masked-2.c: New test.
	* c-c++-common/gomp/masked-combined-1.c: New test.
	* c-c++-common/gomp/masked-combined-2.c: New test.
	* c-c++-common/goacc/uninit-if-clause.c: Remove xfails.
	* g++.dg/gomp/block-11.C: New test.
	* g++.dg/gomp/tpl-masked-1.C: New test.
	* g++.dg/gomp/attrs-1.C (bar): Add tests for masked construct and
	combined masked constructs with clauses in attribute syntax.
	* g++.dg/gomp/attrs-2.C (bar): Likewise.
	* gcc.dg/gomp/nesting-1.c (f1, f2): Add tests for masked construct
	nesting.
	* gfortran.dg/goacc/host_data-tree.f95: Allow also SSA_NAMEs in if
	clause.
	* gfortran.dg/goacc/kernels-tree.f95: Likewise.

2021-08-16  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-08-12  Tobias Burnus  <tobias@codesourcery.com>

	* c-c++-common/gomp/pr61486-2.c: Duplicate one proc_bind(master)
	testcase and test proc_bind(primary) instead.
	* gfortran.dg/gomp/affinity-1.f90: Likewise.

2021-08-12  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-08-12  Jakub Jelinek  <jakub@redhat.com>

	* g++.dg/gomp/attrs-12.C: New test.

2021-08-12  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-08-12  Jakub Jelinek  <jakub@redhat.com>

	* g++.dg/gomp/attrs-11.C: Add new tests.

2021-08-12  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-08-04  Jakub Jelinek  <jakub@redhat.com>

	PR c++/101759
	* g++.dg/gomp/pr101759.C: New test.
	* g++.dg/goacc/pr101759.C: New test.

2021-08-12  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-08-12  Jakub Jelinek  <jakub@redhat.com>

	* g++.dg/gomp/attrs-11.C: Adjust expected diagnostics.

2021-08-10  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-08-10  Jakub Jelinek  <jakub@redhat.com>

	* g++.dg/gomp/attrs-1.C (bar): Add missing semicolon after
	[[omp::directive (threadprivate (t2))]].  Add tests with
	if/while/switch after parallel in attribute syntax.
	(corge): Add missing omp:: before directive.
	* g++.dg/gomp/attrs-2.C (bar): Add missing semicolon after
	[[omp::directive (threadprivate (t2))]].
	* g++.dg/gomp/attrs-10.C: New test.
	* g++.dg/gomp/attrs-11.C: New test.

2021-08-01  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-07-31  Jakub Jelinek  <jakub@redhat.com>

	* g++.dg/gomp/attrs-9.C: New test.

2021-07-30  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-07-30  Jakub Jelinek  <jakub@redhat.com>

	* g++.dg/cpp0x/gen-attrs-76.C: New test.

2021-07-30  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-07-30  Jakub Jelinek  <jakub@redhat.com>

	PR c++/101582
	* g++.dg/cpp0x/gen-attrs-45.C: Expect a warning about ignored
	attributes instead of error.
	* g++.dg/cpp0x/gen-attrs-75.C: New test.
	* g++.dg/modules/pr101582-1.C: New test.

2021-07-27  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-07-26  José Rui Faustino de Sousa  <jrfsousa@gmail.com>
		    Tobias Burnus  <tobias@codesourcery.com>

	PR fortran/93308
	PR fortran/93963
	PR fortran/94327
	PR fortran/94331
	PR fortran/97046
	* gfortran.dg/ISO_Fortran_binding_1.f90: Add pointer attribute,
	this test is still erroneous but now it compiles.
	* gfortran.dg/bind_c_array_params_2.f90: Update regex to match
	code changes.
	* gfortran.dg/PR93308.f90: New test.
	* gfortran.dg/PR93963.f90: New test.
	* gfortran.dg/PR94327.c: New test.
	* gfortran.dg/PR94327.f90: New test.
	* gfortran.dg/PR94331.c: New test.
	* gfortran.dg/PR94331.f90: New test.
	* gfortran.dg/PR97046.f90: New test.

2021-07-26  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-07-26  Jakub Jelinek  <jakub@redhat.com>

	* g++.dg/gomp/attrs-1.C: Use attribute syntax even for section
	and scan directives.
	* g++.dg/gomp/attrs-2.C: Likewise.
	* g++.dg/gomp/attrs-6.C: New test.
	* g++.dg/gomp/attrs-7.C: New test.
	* g++.dg/gomp/attrs-8.C: New test.

2021-07-23  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-07-23  Jakub Jelinek  <jakub@redhat.com>

	* c-c++-common/gomp/attrs-1.c: New test.
	* c-c++-common/gomp/attrs-2.c: New test.
	* c-c++-common/gomp/attrs-3.c: New test.

2021-07-23  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-07-23  Jakub Jelinek  <jakub@redhat.com>

	* g++.dg/gomp/attrs-4.C: New test.
	* g++.dg/gomp/attrs-5.C: New test.

2021-07-21  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-07-21  Jakub Jelinek  <jakub@redhat.com>

	* c-c++-common/gomp/pr101535-1.c: New test.
	* c-c++-common/gomp/pr101535-2.c: New test.

2021-07-21  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-07-21  Jakub Jelinek  <jakub@redhat.com>

	PR c++/101516
	* g++.dg/gomp/pr101516.C: New test.

2021-07-21  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-07-21  Tobias Burnus  <tobias@codesourcery.com>

	* gfortran.dg/iso_c_binding_char_1.f90: Update dg-error.
	* gfortran.dg/pr32599.f03: Use -std=-f2003 + update comment.
	* gfortran.dg/bind_c_char_10.f90: New test.
	* gfortran.dg/bind_c_char_6.f90: New test.
	* gfortran.dg/bind_c_char_7.f90: New test.
	* gfortran.dg/bind_c_char_8.f90: New test.
	* gfortran.dg/bind_c_char_9.f90: New test.

2021-07-20  Andrew Stubbs  <ams@codesourcery.com>

	Backport from master:
	PR target/100208
	* gcc.target/gcn/sram-ecc-1.c: New test.
	* gcc.target/gcn/sram-ecc-2.c: New test.
	* gcc.target/gcn/sram-ecc-3.c: New test.
	* gcc.target/gcn/sram-ecc-4.c: New test.
	* gcc.target/gcn/sram-ecc-5.c: New test.
	* gcc.target/gcn/sram-ecc-6.c: New test.
	* gcc.target/gcn/sram-ecc-7.c: New test.
	* gcc.target/gcn/sram-ecc-8.c: New test.

2021-07-19  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-07-02  Jakub Jelinek  <jakub@redhat.com>

	* g++.dg/gomp/attrs-1.C: New test.
	* g++.dg/gomp/attrs-2.C: New test.
	* g++.dg/gomp/attrs-3.C: New test.

2021-07-19  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-07-02  Jakub Jelinek  <jakub@redhat.com>

	PR c/101297
	* c-c++-common/gomp/atomic-24.c: New test.

2021-06-15  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-06-15  Tobias Burnus  <tobias@codesourcery.com>

	PR fortran/92568
	* gfortran.dg/gomp/pr99928-1.f90: Uncomment 'defaultmap(none)'.
	* gfortran.dg/gomp/pr99928-2.f90: Uncomment 'defaultmap(none)'.
	* gfortran.dg/gomp/pr99928-3.f90: Uncomment 'defaultmap(none)'.
	* gfortran.dg/gomp/pr99928-4.f90: Uncomment 'defaultmap(none)'.
	* gfortran.dg/gomp/pr99928-5.f90: Uncomment 'defaultmap(none)'.
	* gfortran.dg/gomp/pr99928-6.f90: Uncomment 'defaultmap(none)'.
	* gfortran.dg/gomp/pr99928-8.f90: Uncomment 'defaultmap(none)'.
	* gfortran.dg/gomp/defaultmap-1.f90: New test.
	* gfortran.dg/gomp/defaultmap-2.f90: New test.
	* gfortran.dg/gomp/defaultmap-3.f90: New test.
	* gfortran.dg/gomp/defaultmap-4.f90: New test.
	* gfortran.dg/gomp/defaultmap-5.f90: New test.
	* gfortran.dg/gomp/defaultmap-6.f90: New test.
	* gfortran.dg/gomp/defaultmap-7.f90: New test.

2021-06-15  Tobias Burnus  <tobias@codesourcery.com>

	Revert:
	2020-09-28  Tobias Burnus  <tobias@codesourcery.com>

	* c-c++-common/gomp/pr94874.c: Update scan-tree-dump.

2021-06-15  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-06-11  Thomas Schwinge  <thomas@codesourcery.com>

	* gcc.dg/gomp/simd-clones-2.c: Enhance.

2021-06-09  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-06-08  Jakub Jelinek  <jakub@redhat.com>

	PR fortran/100965
	* gfortran.dg/gomp/pr100965.f90: New test.

2021-06-08  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-06-08  Jakub Jelinek  <jakub@redhat.com>

	PR c++/100957
	* g++.dg/gomp/doacross-2.C: New test.

2021-06-08  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-06-08  Tobias Burnus  <tobias@codesourcery.com>

	PR middle-end/99928
	* gfortran.dg/gomp/openmp-simd-6.f90: Update scan-tree-dump.
	* gfortran.dg/gomp/scan-5.f90: Likewise.
	* gfortran.dg/gomp/loop-1.f90: Likewise; remove xfail.
	* gfortran.dg/gomp/pr99928-1.f90: Remove xfail.
	* gfortran.dg/gomp/pr99928-2.f90: Likewise.
	* gfortran.dg/gomp/pr99928-3.f90: Likewise.
	* gfortran.dg/gomp/pr99928-8.f90: Likewise.

2021-06-08  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-06-06  Jakub Jelinek  <jakub@redhat.com>

	* gcc.dg/gomp/scan-1.c: New test.

2021-06-04  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-06-04  Tobias Burnus  <tobias@codesourcery.com>

	* gfortran.dg/gomp/loop-3.f90: New test.

2021-06-04  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-06-04  Tobias Burnus  <tobias@codesourcery.com>

	* gfortran.dg/goacc/omp-fixed.f: Re-add test item changed in previous
	commit in addition - add more dg-errors and '... end ...' due to changed
	parsing.
	* gfortran.dg/goacc/omp.f95: Likewise.
	* gfortran.dg/goacc-gomp/mixed-1.f: New test.

2021-06-04  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-06-04  Tobias Burnus  <tobias@codesourcery.com>

	* gfortran.dg/gomp/pr99928-5.f90: Really use the
	proper iteration variable.

2021-06-04  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-06-04  Tobias Burnus  <tobias@codesourcery.com>

	* gfortran.dg/gomp/pr99928-1.f90: Add 'implicit none'.
	* gfortran.dg/gomp/pr99928-11.f90: Likewise.
	* gfortran.dg/gomp/pr99928-4.f90: Likewise.
	* gfortran.dg/gomp/pr99928-6.f90: Likewise.
	* gfortran.dg/gomp/pr99928-8.f90: Likewise.
	* gfortran.dg/gomp/pr99928-2.f90: Likewise. Add missing decl.
	* gfortran.dg/gomp/pr99928-5.f90: Add implicit none;
	fix loop-variable and remove xfail.

2021-06-04  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-06-04  Tobias Burnus  <tobias@codesourcery.com>

	PR middle-end/99928
	* gfortran.dg/gomp/loop-2.f90: Update for typo fix.

2021-06-04  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-06-04  Tobias Burnus  <tobias@codesourcery.com>

	PR middle-end/99928
	* gfortran.dg/gomp/pr99928-3.f90: Add 'default(none)', following
	C/C++ version of the patch.
	* gfortran.dg/gomp/loop-1.f90: New test.
	* gfortran.dg/gomp/loop-2.f90: New test.
	* gfortran.dg/gomp/pr99928-1.f90: New test; based on C/C++ test.
	* gfortran.dg/gomp/pr99928-11.f90: Likewise.
	* gfortran.dg/gomp/pr99928-2.f90: Likewise.
	* gfortran.dg/gomp/pr99928-4.f90: Likewise.
	* gfortran.dg/gomp/pr99928-5.f90: Likewise.
	* gfortran.dg/gomp/pr99928-6.f90: Likewise.
	* gfortran.dg/gomp/pr99928-8.f90: Likewise.
	* gfortran.dg/goacc/omp.f95: Use 'acc kernels loops' instead
	of 'acc loops' to hide unrelated bug for now.
	* gfortran.dg/goacc/omp-fixed.f: Likewise

2021-06-04  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-06-04  Jakub Jelinek  <jakub@redhat.com>

	PR c++/100872
	* g++.dg/gomp/declare-simd-8.C: New test.

2021-06-04  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-06-03  Jakub Jelinek  <jakub@redhat.com>

	PR c++/100859
	* g++.dg/gomp/depend-iterator-3.C: New test.
	* g++.dg/gomp/this-1.C: Don't expect any diagnostics for
	this as base expression of depend array section, expect a different
	error wording for this as depend locator and add testcases
	for affinity clauses.

2021-06-01  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-06-01  Tobias Burnus  <tobias@codesourcery.com>

	PR middle-end/99928
	* gfortran.dg/gomp/reduction5.f90: Remove dg-error; the issue is
	now diagnosed with less error output.
	* gfortran.dg/gomp/scan-1.f90: Likewise.
	* gfortran.dg/gomp/pr99928-3.f90: New test.
	* gfortran.dg/gomp/taskloop-1.f90: New test.

2021-06-01  Tobias Burnus  <tobias@codesourcery.com>

	* c-c++-common/gomp/affinity-6.c: Use dg-message
	instead of dg-note.
	* gfortran.dg/gomp/affinity-clause-4.f90: Likewise.

2021-05-31  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-05-31  Tobias Burnus  <tobias@codesourcery.com>

	* gfortran.dg/gomp/depend-iterator-1.f90: Use dg-do compile.
	* gfortran.dg/gomp/depend-iterator-2.f90: Use dg-do compile.

2021-05-31  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-05-29  Jakub Jelinek  <jakub@redhat.com>

	PR middle-end/99928
	* c-c++-common/gomp/pr99928-1.c: Add default(none) to constructs
	combined with parallel, teams or taskloop and defaultmap(none)
	to constructs combined with target.
	* c-c++-common/gomp/pr99928-2.c: Likewise.
	* c-c++-common/gomp/pr99928-3.c: Likewise.
	* c-c++-common/gomp/pr99928-4.c: Likewise.
	* c-c++-common/gomp/pr99928-5.c: Likewise.
	* c-c++-common/gomp/pr99928-6.c: Likewise.
	* c-c++-common/gomp/pr99928-7.c: Likewise.
	* c-c++-common/gomp/pr99928-8.c: Likewise.
	* c-c++-common/gomp/pr99928-9.c: Likewise.
	* c-c++-common/gomp/pr99928-10.c: Likewise.
	* c-c++-common/gomp/pr99928-13.c: Likewise.
	* c-c++-common/gomp/pr99928-14.c: Likewise.

2021-05-28  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-05-28  Jakub Jelinek  <jakub@redhat.com>

	* c-c++-common/gomp/pr99928-8.c: Remove all xfails.
	* c-c++-common/gomp/pr99928-9.c: Likewise.
	* c-c++-common/gomp/pr99928-10.c: Likewise.
	* c-c++-common/gomp/pr99928-16.c: New test.

2021-05-28  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-05-28  Tobias Burnus  <tobias@codesourcery.com>

	* c-c++-common/gomp/affinity-1.c: New test.
	* c-c++-common/gomp/affinity-2.c: New test.
	* c-c++-common/gomp/affinity-3.c: New test.
	* c-c++-common/gomp/affinity-4.c: New test.
	* c-c++-common/gomp/affinity-5.c: New test.
	* c-c++-common/gomp/affinity-6.c: New test.
	* c-c++-common/gomp/affinity-7.c: New test.
	* gfortran.dg/gomp/affinity-clause-1.f90: New test.
	* gfortran.dg/gomp/affinity-clause-2.f90: New test.
	* gfortran.dg/gomp/affinity-clause-3.f90: New test.
	* gfortran.dg/gomp/affinity-clause-4.f90: New test.
	* gfortran.dg/gomp/affinity-clause-5.f90: New test.
	* gfortran.dg/gomp/affinity-clause-6.f90: New test.
	* gfortran.dg/gomp/depend-iterator-1.f90: New test.
	* gfortran.dg/gomp/depend-iterator-2.f90: New test.
	* gfortran.dg/gomp/depend-iterator-3.f90: New test.
	* gfortran.dg/gomp/taskwait.f90: New test.

2021-05-25  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-05-25  Jakub Jelinek  <jakub@redhat.com>

	PR middle-end/99928
	* c-c++-common/gomp/pr99928-8.c: Remove xfails from omp teams r21 and
	r28 checks.
	* c-c++-common/gomp/pr99928-9.c: Likewise.
	* c-c++-common/gomp/pr99928-10.c: Likewise.

2021-05-24  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-05-24  Tobias Burnus  <tobias@codesourcery.com>

	PR fortran/86470
	* gfortran.dg/gomp/class-firstprivate-1.f90: New test.
	* gfortran.dg/gomp/class-firstprivate-2.f90: New test.
	* gfortran.dg/gomp/class-firstprivate-3.f90: New test.
	* gfortran.dg/gomp/class-firstprivate-4.f90: New test.

2021-05-23  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-05-21  Jakub Jelinek  <jakub@redhat.com>

	PR middle-end/99928
	* c-c++-common/gomp/pr99928-3.c: Remove all xfails.
	* c-c++-common/gomp/pr99928-15.c: New test.

2021-05-23  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-05-21  Jakub Jelinek  <jakub@redhat.com>

	PR middle-end/99928
	* c-c++-common/gomp/pr99928-6.c: Remove all xfails. 
	* c-c++-common/gomp/pr99928-13.c: New test.
	* c-c++-common/gomp/pr99928-14.c: New test.

2021-05-21  Marcel Vollweiler  <marcel@codesourcery.com>

	Fortran/OpenMP: Add support for 'close' in map clause

	* gfortran.dg/gomp/map-6.f90: New test.
	* gfortran.dg/gomp/map-7.f90: New test.
	* gfortran.dg/gomp/map-8.f90: New test.

2021-05-20  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-05-20  Jakub Jelinek  <jakub@redhat.com>

	PR middle-end/99928
	* c-c++-common/gomp/pr99928-4.c: Remove all xfails.
	* c-c++-common/gomp/pr99928-5.c: Likewise.

2021-05-19  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-05-19  Jakub Jelinek  <jakub@redhat.com>

	PR middle-end/99928
	* c-c++-common/gomp/pr99928-2.c: Remove all xfails.
	* c-c++-common/gomp/pr99928-12.c: New test.

2021-05-18  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-05-18  Tobias Burnus  <tobias@codesourcery.com>

	PR fortran/100642
	* gfortran.dg/goacc-gomp/depobj.f90: New test.

2021-05-17  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-05-14  Tobias Burnus  <tobias@codesourcery.com>

	* gfortran.dg/gomp/parallel-master-1.f90: New test.
	* gfortran.dg/gomp/parallel-master-2.f90: New test.

2021-05-14  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-05-13  Jakub Jelinek  <jakub@redhat.com>

	PR middle-end/99928
	* c-c++-common/gomp/pr99928-1.c: New test.
	* c-c++-common/gomp/pr99928-2.c: New test.
	* c-c++-common/gomp/pr99928-3.c: New test.
	* c-c++-common/gomp/pr99928-4.c: New test.
	* c-c++-common/gomp/pr99928-5.c: New test.
	* c-c++-common/gomp/pr99928-6.c: New test.
	* c-c++-common/gomp/pr99928-7.c: New test.
	* c-c++-common/gomp/pr99928-8.c: New test.
	* c-c++-common/gomp/pr99928-9.c: New test.
	* c-c++-common/gomp/pr99928-10.c: New test.
	* c-c++-common/gomp/pr99928-11.c: New test.

2021-05-14  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-05-12  Marcel Vollweiler  <marcel@codesourcery.com>

	* c-c++-common/gomp/map-6.c: New test.
	* c-c++-common/gomp/map-7.c: New test.

2021-05-14  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-05-05  Tobias Burnus  <tobias@codesourcery.com>

	PR testsuite/100422
	* g++.dg/gomp/clause-3.C: Use 'reduction(&:..)' instead of '...(&&:..)'.

2021-05-14  Tobias Burnus  <tobias@codesourcery.com>

	Backported from master:
	2021-05-04  Tobias Burnus  <tobias@codesourcery.com>

	* gcc.dg/gomp/clause-1.c: Use 'reduction(&:..)' instead of '...(&&:..)'.

2021-05-07  Thomas Schwinge  <thomas@codesourcery.com>

	* c-c++-common/goacc/firstprivate-mappings-1.c: Fix up for C,
	non-LP64.

2021-05-05  Chung-Lin Tang  <cltang@codesourcery.com>

	* c-c++-common/gomp/target-implicit-map-1.c: New test.
	* c-c++-common/goacc/combined-reduction.c: Adjust scan test pattern.
	* c-c++-common/goacc/firstprivate-mappings-1.c: Likewise.
	* c-c++-common/goacc/mdc-1.c: Likewise.
	* c-c++-common/goacc/reduction-1.c: Likewise.
	* c-c++-common/goacc/reduction-2.c: Likewise.
	* c-c++-common/goacc/reduction-3.c: Likewise.
	* c-c++-common/goacc/reduction-4.c: Likewise.
	* c-c++-common/goacc/reduction-8.c: Likewise.
	* g++.dg/goacc/firstprivate-mappings-1.C: Likewise.
	* g++.dg/gomp/target-lambda-1.C: Likewise.
	* g++.dg/gomp/target-this-3.C: Likewise.
	* g++.dg/gomp/target-this-4.C: Likewise.
	* gfortran.dg/goacc/common-block-3.f90: Likewise.
	* gfortran.dg/goacc/loop-tree-1.f90: Likewise.
	* gfortran.dg/goacc/private-explicit-kernels-1.f95: Likewise.
	* gfortran.dg/goacc/private-predetermined-kernels-1.f95: Likewise.

2021-04-30  Kwok Cheung Yeung  <kcy@codesourcery.com>

	* c-c++-common/goacc/note-parallelism-1-kernels-straight-line.c: Add
	-Wopenacc-parallelism option.
	* c-c++-common/goacc/orphan-reductions-2.c: Likewise.
	* gfortran.dg/goacc/orphan-reductions-2.f90: Likewise.

2021-04-30  Kwok Cheung Yeung  <kcy@codesourcery.com>

	Backport from mainline
	2021-04-26  Tobias Burnus  <tobias@codesourcery.com>

	* gfortran.dg/goacc/classify-serial.f95:
	Use [Ww]arning in dg-bogus as FE diagnostic and default
	diagnostic differ and the result depends on ENABLE_OFFLOAD.
	* gfortran.dg/goacc/kernels-decompose-2.f95: Likewise.
	* gfortran.dg/goacc/routine-module-mod-1.f90: Likewise.

2021-04-30  Kwok Cheung Yeung  <kcy@codesourcery.com>

	Backport from mainline
	2021-04-26  Tobias Burnus  <tobias@codesourcery.com>

	* gfortran.dg/goacc/classify-serial.f95:
	Correct spelling in dg-bogus to match -Wopenacc-parallelism.
	* gfortran.dg/goacc/kernels-decompose-2.f95: Likewise.
	* gfortran.dg/goacc/routine-module-mod-1.f90: Likewise.

2021-04-30  Kwok Cheung Yeung  <kcy@codesourcery.com>

	Backport from mainline
	2021-04-23  Thomas Schwinge  <thomas@codesourcery.com>

	* c-c++-common/goacc/diag-parallelism-1.c: New.
	* c-c++-common/goacc/acc-icf.c: Specify '-Wopenacc-parallelism',
	and match diagnostics, as appropriate.
	* c-c++-common/goacc/classify-kernels-unparallelized.c: Likewise.
	* c-c++-common/goacc/classify-kernels.c: Likewise.
	* c-c++-common/goacc/classify-parallel.c: Likewise.
	* c-c++-common/goacc/classify-routine.c: Likewise.
	* c-c++-common/goacc/classify-serial.c: Likewise.
	* c-c++-common/goacc/kernels-decompose-1.c: Likewise.
	* c-c++-common/goacc/kernels-decompose-2.c: Likewise.
	* c-c++-common/goacc/parallel-dims-1.c: Likewise.
	* c-c++-common/goacc/parallel-reduction.c: Likewise.
	* c-c++-common/goacc/pr70688.c: Likewise.
	* c-c++-common/goacc/routine-1.c: Likewise.
	* c-c++-common/goacc/routine-level-of-parallelism-2.c: Likewise.
	* c-c++-common/goacc/uninit-dim-clause.c: Likewise.
	* gfortran.dg/goacc/classify-kernels-unparallelized.f95: Likewise.
	* gfortran.dg/goacc/classify-kernels.f95: Likewise.
	* gfortran.dg/goacc/classify-parallel.f95: Likewise.
	* gfortran.dg/goacc/classify-routine.f95: Likewise.
	* gfortran.dg/goacc/classify-serial.f95: Likewise.
	* gfortran.dg/goacc/kernels-decompose-1.f95: Likewise.
	* gfortran.dg/goacc/kernels-decompose-2.f95: Likewise.
	* gfortran.dg/goacc/parallel-tree.f95: Likewise.
	* gfortran.dg/goacc/routine-4.f90: Likewise.
	* gfortran.dg/goacc/routine-level-of-parallelism-1.f90: Likewise.
	* gfortran.dg/goacc/routine-module-mod-1.f90: Likewise.
	* gfortran.dg/goacc/routine-multiple-directives-1.f90: Likewise.
	* gfortran.dg/goacc/uninit-dim-clause.f95: Likewise.

2021-04-29  Kwok Cheung Yeung  <kcy@codesourcery.com>

	* c-c++-common/goacc/classify-serial.c: Surpress warnings.  Dump
	oaccloops pass instead of oaccdevlow.
	* gfortran.dg/goacc/classify-serial.f95: Likewise.

2021-04-29  Kwok Cheung Yeung  <kcy@codesourcery.com>

	* c-c++-common/goacc/data-clause-1.c (foo): Remove expected message.
	* g++.dg/goacc/data-clause-1.C (foo): Remove expected message.

2021-04-29  Kwok Cheung Yeung  <kcy@codesourcery.com>

	* c-c++-common/goacc/kernels-decompose-ice-1.c (main): Update expected
	message.

2021-04-29  Kwok Cheung Yeung  <kcy@codesourcery.com>

	* c-c++-common/goacc/kernels-decompose-2.c (main): Update expected
	messages.
	* gfortran.dg/goacc/kernels-decompose-2.f95 (main): Update expected
	messages.
	
2021-04-22  Kwok Cheung Yeung  <kcy@codesourcery.com>

	Backport from mainline
	2021-04-21  Tobias Burnus  <tobias@codesourcery.com>

	* gfortran.dg/gomp/depobj-1.f90: New test.
	* gfortran.dg/gomp/depobj-2.f90: New test.

2021-04-07  Kwok Cheung Yeung  <kcy@codesourcery.com>

	* c-c++-common/goacc/classify-kernels-unparallelized.c: Update
	additional options and expected messages.
	* c-c++-common/goacc/classify-kernels.c: Likewise.
	* c-c++-common/goacc/note-parallelism-1-kernels-conditional-loop-independent_seq.c:
	Likewise.
	* c-c++-common/goacc/note-parallelism-1-kernels-loop-auto.c: Likewise.
	* c-c++-common/goacc/note-parallelism-1-kernels-loop-independent_seq.c:
	Likewise.
	* c-c++-common/goacc/note-parallelism-1-kernels-loops.c: Likewise.
	* c-c++-common/goacc/note-parallelism-1-kernels-straight-line.c:
	Likewise.
	* c-c++-common/goacc/note-parallelism-combined-kernels-loop-auto.c:
	Likewise.
	* c-c++-common/goacc/note-parallelism-combined-kernels-loop-independent_seq.c:
	Likewise.
	* c-c++-common/goacc/note-parallelism-kernels-conditional-loop-independent_seq.c:
	Likewise.
	* c-c++-common/goacc/note-parallelism-kernels-loop-auto.c: Likewise.
	* c-c++-common/goacc/note-parallelism-kernels-loop-independent_seq.c:
	Likewise.
	* c-c++-common/goacc/note-parallelism-kernels-loops.c: Likewise.
	* gfortran.dg/goacc/classify-kernels-unparallelized.f95: Likewise.
	* gfortran.dg/goacc/classify-kernels.f95: Likewise.

2020-09-28  Tobias Burnus  <tobias@codesourcery.com>

	* c-c++-common/gomp/pr94874.c: Update scan-tree-dump.

2020-08-30  Sandra Loosemore  <sandra@codesourcery.com>

	* c-c++-common/goacc/kernels-loop-annotation-21.c: New.
	* c-c++-common/goacc/kernels-loop-annotation-22.c: New.

2020-08-24  Tobias Burnus  <tobias@codesourcery.com>
	    Sandra Loosemore  <sandra@codesourcery.com>

	* testsuite/gfortran.dg/goacc/kernels-decompose-2.f95:
	Fix typo; remove XFAIL.

2020-08-23   Sandra Loosemore  <sandra@codesourcery.com>

	* gfortran.dg/goacc/kernels-loop-annotation-1.f95: Update
	expected output.
	* gfortran.dg/goacc/kernels-loop-annotation-2.f95: Likewise.
	* gfortran.dg/goacc/kernels-loop-annotation-3.f95: Likewise.
	* gfortran.dg/goacc/kernels-loop-annotation-4.f95: Likewise.
	* gfortran.dg/goacc/kernels-loop-annotation-5.f95: Likewise.
	* gfortran.dg/goacc/kernels-loop-annotation-6.f95: Likewise.
	* gfortran.dg/goacc/kernels-loop-annotation-7.f95: Likewise.
	* gfortran.dg/goacc/kernels-loop-annotation-8.f95: Likewise.
	* gfortran.dg/goacc/kernels-loop-annotation-11.f95: Likewise.
	* gfortran.dg/goacc/kernels-loop-annotation-12.f95: Likewise.
	* gfortran.dg/goacc/kernels-loop-annotation-13.f95: Likewise.
	* gfortran.dg/goacc/kernels-loop-annotation-14.f95: Likewise.
	* gfortran.dg/goacc/kernels-loop-annotation-15.f95: Likewise.
	* gfortran.dg/goacc/kernels-loop-annotation-16.f95: Likewise.

2020-08-22   Sandra Loosemore  <sandra@codesourcery.com>

	Test cases for allowing calls to C/C++ builtins and Fortran
	intrinsics in loops in kernels regions.

	* c-c++-common/goacc/kernels-loop-annotation-20.c: New.
	* gfortran.dg/goacc/kernels-loop-annotation-20.f95: New.

2020-08-21  Tobias Burnus  <tobias@codesourcery.com>

	* gfortran.dg/gomp/pr67500.f90: Change dg-warning to
	dg-error.

2020-08-19   Sandra Loosemore  <sandra@codesourcery.com>

	Annotate inner loops in "acc kernels loop" directives (Fortran).

	* gfortran.dg/goacc/kernels-loop-annotation-18.f95: New.
	* gfortran.dg/goacc/kernels-loop-annotation-19.f95: New.
	* gfortran.dg/goacc/combined-directives.f90: Adjust expected
	patterns.
	* gfortran.dg/goacc/private-explicit-kernels-1.f95: Likewise.
	* gfortran.dg/goacc/private-predetermined-kernels-1.f95:
	Likewise.

2020-08-19  Sandra Loosemore  <sandra@codesourcery.com>

	Annotate inner loops in "acc kernels loop" directives (C/C++).

	* c-c++-common/goacc/kernels-loop-annotation-18.c: New.
	* c-c++-common/goacc/kernels-loop-annotation-19.c: New.
	* c-c++-common/goacc/combined-directives.c: Adjust expected
	patterns.

2020-08-19  Kwok Cheung Yeung  <kcy@codesourcery.com>

	* gfortran.dg/goacc/pr70828.f90: Update expected output in Gimple
	dump.

2020-07-28  Kwok Cheung Yeung  <kcy@codesourcery.com>

	* c-c++-common/goacc/routine-4.c (seq, vector, worker, gang): Revert
	previous changes.  Remove loop reductions.
	* c-c++-common/goacc/routine-4-extern.c (seq, vector, worker, gang):
	Likewise.

2020-07-24  Kwok Cheung Yeung  <kcy@codesourcery.com>

	* gfortran.dg/goacc/routine-module-mod-1.f90 (g_1): Add
	expected output.

2020-07-24  Kwok Cheung Yeung  <kcy@codesourcery.com>

	* gfortran.dg/goacc/loop-2-kernels.f95: Add XFAILs.

2020-07-24  Kwok Cheung Yeung  <kcy@codesourcery.com>

	* gcc.dg/goacc/loop-processing-1.c: Remove erroneous line-break.
	Specify correct tree pass for output.  Fix expected constant values.

2020-07-24  Kwok Cheung Yeung  <kcy@codesourcery.com>

	* c-c++-common/goacc/note-parallelism-combined-kernels-loop-auto.c
	(main): Remove obsolete expected messages.

2020-07-22  Kwok Cheung Yeung  <kcy@codesourcery.com>

	* c-c++-common/goacc/routine-nohost-1.c: Change tree dump pass to
	oaccloops.

2020-07-20  Frederik Harwath  <frederik@codesourcery.com>

	* gfortran.dg/goacc/orphan-reductions-2.f90: New test
	verifying that the "gang reduction on an orphan loop" error message
	is not emitted for non-orphaned loops.
	* c-c++-common/goacc/orphan-reductions-2.c: Likewise for C and C++.

2020-06-02  Kwok Cheung Yeung  <kcy@codesourcery.com>

	* c-c++-common/goacc/noncontig_array-1.c: Dump Gimple pass.

2020-03-27  Sandra Loosemore  <sandra@codesourcery.com>

	* gfortran.dg/goacc/classify-kernels-unparallelized.f95: Adjust
	line numbering.
	* gfortran.dg/goacc/classify-kernels.f95: Likewise.
	* gfortran.dg/goacc/kernels-decompose-2.f95: Add
	-fno-openacc-kernels-annotate-loops.

2020-03-27  Sandra Loosemore  <sandra@codesourcery.com>
	    Gergö Barany <gergo@codesourcery.com>

	* gfortran.dg/goacc/classify-kernels-unparallelized.f95: Add
	-fno-openacc-kernels-annotate-loops option.
	* gfortran.dg/goacc/classify-kernels.f95: Likewise.
	* gfortran.dg/goacc/common-block-3.f90: Likewise.
	* gfortran.dg/goacc/kernels-loop-2.f95: Likewise.
	* gfortran.dg/goacc/kernels-loop-data-2.f95: Likewise.
	* gfortran.dg/goacc/kernels-loop-data-enter-exit-2.f95: Likewise.
	* gfortran.dg/goacc/kernels-loop-data-enter-exit.f95: Likewise.
	* gfortran.dg/goacc/kernels-loop-data-update.f95: Likewise.
	* gfortran.dg/goacc/kernels-loop-data.f95: Likewise.
	* gfortran.dg/goacc/kernels-loop-n.f95: Likewise.
	* gfortran.dg/goacc/kernels-loop.f95: Likewise.
	* gfortran.dg/goacc/kernels-parallel-loop-data-enter-exit.f95:
	Likewise.
	* gfortran.dg/goacc/kernels-loop-annotation-1.f95: New.
	* gfortran.dg/goacc/kernels-loop-annotation-2.f95: New.
	* gfortran.dg/goacc/kernels-loop-annotation-3.f95: New.
	* gfortran.dg/goacc/kernels-loop-annotation-4.f95: New.
	* gfortran.dg/goacc/kernels-loop-annotation-5.f95: New.
	* gfortran.dg/goacc/kernels-loop-annotation-6.f95: New.
	* gfortran.dg/goacc/kernels-loop-annotation-7.f95: New.
	* gfortran.dg/goacc/kernels-loop-annotation-8.f95: New.
	* gfortran.dg/goacc/kernels-loop-annotation-9.f95: New.
	* gfortran.dg/goacc/kernels-loop-annotation-10.f95: New.
	* gfortran.dg/goacc/kernels-loop-annotation-11.f95: New.
	* gfortran.dg/goacc/kernels-loop-annotation-12.f95: New.
	* gfortran.dg/goacc/kernels-loop-annotation-13.f95: New.
	* gfortran.dg/goacc/kernels-loop-annotation-14.f95: New.
	* gfortran.dg/goacc/kernels-loop-annotation-15.f95: New.
	* gfortran.dg/goacc/kernels-loop-annotation-16.f95: New.

2020-03-27  Sandra Loosemore  <sandra@codesourcery.com>

	* c-c++-common/goacc/kernels-decompose-2.c: Add
	-fno-openacc-kernels-annotate-loops.
	* c-c++-common/goacc/note-parallelism-1-kernels-loops.c: Likewise.
	* c-c++-common/goacc/note-parallelism-kernels-loops.c: Likewise.

2020-03-27  Sandra Loosemore  <sandra@codesourcery.com>

	* c-c++-common/goacc/classify-kernels-unparallelized.c: Add
	-fno-openacc-kernels-annotate-loops option.
	* c-c++-common/goacc/classify-kernels.c: Likewise.
	* c-c++-common/goacc/kernels-counter-var-redundant-load.c: Likewise.
	* c-c++-common/goacc/kernels-counter-vars-function-scope.c: Likewise.
	* c-c++-common/goacc/kernels-double-reduction-n.c: Likewise.
	* c-c++-common/goacc/kernels-double-reduction.c: Likewise.
	* c-c++-common/goacc/kernels-loop-2.c: Likewise.
	* c-c++-common/goacc/kernels-loop-3.c: Likewise.
	* c-c++-common/goacc/kernels-loop-data-2.c: Likewise.
	* c-c++-common/goacc/kernels-loop-data-enter-exit-2.c: Likewise.
	* c-c++-common/goacc/kernels-loop-data-enter-exit.c: Likewise.
	* c-c++-common/goacc/kernels-loop-data-update.c: Likewise.
	* c-c++-common/goacc/kernels-loop-data.c: Likewise.
	* c-c++-common/goacc/kernels-loop-g.c: Likewise.
	* c-c++-common/goacc/kernels-loop-mod-not-zero.c: Likewise.
	* c-c++-common/goacc/kernels-loop-n.c: Likewise.
	* c-c++-common/goacc/kernels-loop-nest.c: Likewise.
	* c-c++-common/goacc/kernels-loop.c: Likewise.
	* c-c++-common/goacc/kernels-one-counter-var.c: Likewise.
	* c-c++-common/goacc/kernels-parallel-loop-data-enter-exit.c:
	Likewise.
	* c-c++-common/goacc/kernels-reduction.c: Likewise.
	* c-c++-common/goacc/kernels-loop-annotation-1.c: New.
	* c-c++-common/goacc/kernels-loop-annotation-2.c: New.
	* c-c++-common/goacc/kernels-loop-annotation-3.c: New.
	* c-c++-common/goacc/kernels-loop-annotation-4.c: New.
	* c-c++-common/goacc/kernels-loop-annotation-5.c: New.
	* c-c++-common/goacc/kernels-loop-annotation-6.c: New.
	* c-c++-common/goacc/kernels-loop-annotation-7.c: New.
	* c-c++-common/goacc/kernels-loop-annotation-8.c: New.
	* c-c++-common/goacc/kernels-loop-annotation-9.c: New.
	* c-c++-common/goacc/kernels-loop-annotation-10.c: New.
	* c-c++-common/goacc/kernels-loop-annotation-11.c: New.
	* c-c++-common/goacc/kernels-loop-annotation-12.c: New.
	* c-c++-common/goacc/kernels-loop-annotation-13.c: New.
	* c-c++-common/goacc/kernels-loop-annotation-14.c: New.
	* c-c++-common/goacc/kernels-loop-annotation-15.c: New.
	* c-c++-common/goacc/kernels-loop-annotation-16.c: New.
	* c-c++-common/goacc/kernels-loop-annotation-17.c: New.

2020-03-19  Kwok Cheung Yeung  <kcy@codesourcery.com>

	* c-c++-common/goacc/routine-level-of-parallelism-2.c (g_1): Add
	missing test directives.

2020-03-17  Tobias Burnus  <tobias@codesourcery.com>

	* gfortran.dg/goacc/kernels-decompose-2.f95: Remove some
	xfails as the tests now pass.

2020-03-17  Tobias Burnus  <tobias@codesourcery.com>

	* gfortran.dg/goacc/common-block-3.f90: Update scan-tree-dump-times.
	* gfortran.dg/goacc/declare-3.f95: Update scan-tree-dump-times.

2018-10-04  Cesar Philippidis  <cesar@codesourcery.com>
	    Julian Brown  <julian@codesourcery.com>

	* gfortran.dg/goacc/declare-allocatable-1.f90: New test.

2019-09-19  Tobias Burnus  <tobias@codesourcery.com>

	* gfortran.dg/goacc/classify-kernels-unparallelized.f95: Add
	one dg-message for additional -fopt-info-optimized-omp output.
	* gfortran.dg/goacc/classify-kernels.f95: Likewise.

2019-09-17  Julian Brown  <julian@codesourcery.com>

	* c-c++-common/goacc/classify-kernels-unparallelized.c: Update expected
	message/warning/error output.
	* c-c++-common/goacc/classify-kernels.c: Likewise.
	* c-c++-common/goacc/note-parallelism-1-kernels-loop-auto.c: Likewise.
	* c-c++-common/goacc/note-parallelism-combined-kernels-loop-auto.c:
	Likewise.
	* c-c++-common/goacc/note-parallelism-kernels-loop-auto.c: Likewise.
	* c-c++-common/goacc/routine-1.c: Likewise.
	* c-c++-common/goacc/routine-4-extern.c: Likewise.

2019-09-05  Julian Brown  <julian@codesourcery.com>

	* c-c++-common/goacc/classify-kernels-unparallelized.c,
	c-c++-common/goacc/classify-kernels.c,
	c-c++-common/goacc/classify-parallel.c,
	c-c++-common/goacc/classify-routine.c,
	gfortran.dg/goacc/classify-kernels-unparallelized.f95,
	gfortran.dg/goacc/classify-kernels.f95,
	gfortran.dg/goacc/classify-parallel.f95,
	gfortran.dg/goacc/classify-routine.f95: Scan oaccloops dump instead of
	oaccdevlow pass.

2019-05-31  Kwok Cheung Yeung  <kcy@codesourcery.com>

	* c-c++-common/goacc/kernels-decompose-1.c: Change 'note:' to
	'optimized:'.  Fix typo.
	* c-c++-common/goacc/note-parallelism-1-kernels-conditional-loop-independent_seq.c:
	Change 'note:' to 'optimized:'.
	* c-c++-common/goacc/note-parallelism-1-kernels-loop-auto.c: Likewise.
	* c-c++-common/goacc/note-parallelism-1-kernels-loop-independent_seq.c:
	Likewise.
	* c-c++-common/goacc/note-parallelism-1-kernels-loops.c: Likewise.
	* c-c++-common/goacc/note-parallelism-1-kernels-straight-line.c:
	Likewise.
	* c-c++-common/goacc/note-parallelism-combined-kernels-loop-auto.c:
	Likewise.
	* c-c++-common/goacc/note-parallelism-combined-kernels-loop-independent_seq.c:
	Likewise.
	* c-c++-common/goacc/note-parallelism-kernels-conditional-loop-independent_seq.c:
	Likewise.
	* c-c++-common/goacc/note-parallelism-kernels-loop-auto.c: Likewise.
	* c-c++-common/goacc/note-parallelism-kernels-loop-independent_seq.c:
	Likewise.
	* c-c++-common/goacc/note-parallelism-kernels-loops.c: Likewise.

2019-01-09  Julian Brown  <julian@codesourcery.com>

	* c-c++-common/cpp/openacc-define-3.c: Update expected value for
	_OPENACC define.
	* gfortran.dg/openacc-define-3.f90: Likewise.

2019-01-23  Thomas Schwinge  <thomas@codesourcery.com>

	* c-c++-common/goacc/classify-kernels-unparallelized.c: Update.
	* c-c++-common/goacc/classify-kernels.c: Likewise.
	* c-c++-common/goacc/classify-parallel.c: Likewise.
	* c-c++-common/goacc/classify-routine.c: Likewise.
	* c-c++-common/goacc/loop-2-kernels.c: Likewise.
	* c-c++-common/goacc/note-parallelism-1-kernels-conditional-loop-independent_seq.c:
	New file.
	* c-c++-common/goacc/note-parallelism-1-kernels-loop-auto.c:
	Likewise.
	* c-c++-common/goacc/note-parallelism-1-kernels-loop-independent_seq.c:
	Likewise.
	* c-c++-common/goacc/note-parallelism-1-kernels-loops.c: Likewise.
	* c-c++-common/goacc/note-parallelism-1-kernels-straight-line.c:
	Likewise.
	* c-c++-common/goacc/note-parallelism-combined-kernels-loop-auto.c:
	Likewise.
	* c-c++-common/goacc/note-parallelism-combined-kernels-loop-independent_seq.c:
	Likewise.
	* c-c++-common/goacc/note-parallelism-kernels-conditional-loop-independent_seq.c:
	Likewise.
	* c-c++-common/goacc/note-parallelism-kernels-loop-auto.c:
	Likewise.
	* c-c++-common/goacc/note-parallelism-kernels-loop-independent_seq.c:
	Likewise.
	* c-c++-common/goacc/note-parallelism-kernels-loops.c: Likewise.
	* c-c++-common/goacc/note-parallelism.c: Likewise.
	* c-c++-common/goacc/routine-1.c: Likewise.
	* c-c++-common/goacc/uninit-dim-clause.c: Likewise.

2019-01-30  Thomas Schwinge  <thomas@codesourcery.com>

	* c-c++-common/goacc/kernels-1.c: Add
	"--param=openacc-kernels=parloops".
	* c-c++-common/goacc/kernels-acc-loop-reduction.c: Likewise.
	* c-c++-common/goacc/kernels-acc-loop-smaller-equal.c: Likewise.
	* c-c++-common/goacc/kernels-alias-2.c: Likewise.
	* c-c++-common/goacc/kernels-alias-3.c: Likewise.
	* c-c++-common/goacc/kernels-alias-4.c: Likewise.
	* c-c++-common/goacc/kernels-alias-5.c: Likewise.
	* c-c++-common/goacc/kernels-alias-6.c: Likewise.
	* c-c++-common/goacc/kernels-alias-7.c: Likewise.
	* c-c++-common/goacc/kernels-alias-8.c: Likewise.
	* c-c++-common/goacc/kernels-alias-ipa-pta-2.c: Likewise.
	* c-c++-common/goacc/kernels-alias-ipa-pta-3.c: Likewise.
	* c-c++-common/goacc/kernels-alias-ipa-pta-4.c: Likewise.
	* c-c++-common/goacc/kernels-alias-ipa-pta.c: Likewise.
	* c-c++-common/goacc/kernels-alias.c: Likewise.
	* c-c++-common/goacc/kernels-counter-var-redundant-load.c:
	Likewise.
	* c-c++-common/goacc/kernels-counter-vars-function-scope.c:
	Likewise.
	* c-c++-common/goacc/kernels-double-reduction-n.c: Likewise.
	* c-c++-common/goacc/kernels-double-reduction.c: Likewise.
	* c-c++-common/goacc/kernels-loop-2-acc-loop.c: Likewise.
	* c-c++-common/goacc/kernels-loop-2.c: Likewise.
	* c-c++-common/goacc/kernels-loop-3-acc-loop.c: Likewise.
	* c-c++-common/goacc/kernels-loop-3.c: Likewise.
	* c-c++-common/goacc/kernels-loop-acc-loop.c: Likewise.
	* c-c++-common/goacc/kernels-loop-data-2.c: Likewise.
	* c-c++-common/goacc/kernels-loop-data-enter-exit-2.c: Likewise.
	* c-c++-common/goacc/kernels-loop-data-enter-exit.c: Likewise.
	* c-c++-common/goacc/kernels-loop-data-update.c: Likewise.
	* c-c++-common/goacc/kernels-loop-data.c: Likewise.
	* c-c++-common/goacc/kernels-loop-g.c: Likewise.
	* c-c++-common/goacc/kernels-loop-mod-not-zero.c: Likewise.
	* c-c++-common/goacc/kernels-loop-n-acc-loop.c: Likewise.
	* c-c++-common/goacc/kernels-loop-n.c: Likewise.
	* c-c++-common/goacc/kernels-loop-nest.c: Likewise.
	* c-c++-common/goacc/kernels-loop.c: Likewise.
	* c-c++-common/goacc/kernels-one-counter-var.c: Likewise.
	* c-c++-common/goacc/kernels-parallel-loop-data-enter-exit.c:
	Likewise.
	* c-c++-common/goacc/kernels-reduction.c: Likewise.
	* gfortran.dg/goacc/kernels-alias-2.f95: Likewise.
	* gfortran.dg/goacc/kernels-alias-3.f95: Likewise.
	* gfortran.dg/goacc/kernels-alias-4.f95: Likewise.
	* gfortran.dg/goacc/kernels-alias.f95: Likewise.
	* gfortran.dg/goacc/kernels-loop-2.f95: Likewise.
	* gfortran.dg/goacc/kernels-loop-data-2.f95: Likewise.
	* gfortran.dg/goacc/kernels-loop-data-enter-exit-2.f95: Likewise.
	* gfortran.dg/goacc/kernels-loop-data-enter-exit.f95: Likewise.
	* gfortran.dg/goacc/kernels-loop-data-update.f95: Likewise.
	* gfortran.dg/goacc/kernels-loop-data.f95: Likewise.
	* gfortran.dg/goacc/kernels-loop-inner.f95: Likewise.
	* gfortran.dg/goacc/kernels-loop-n.f95: Likewise.
	* gfortran.dg/goacc/kernels-loop.f95: Likewise.
	* gfortran.dg/goacc/kernels-loops-adjacent.f95: Likewise.
	* gfortran.dg/goacc/kernels-parallel-loop-data-enter-exit.f95:
	Likewise.

2018-09-05  Cesar Philippidis  <cesar@codesourcery.com>
	    Chung-Lin Tang  <cltang@codesourcery.com>

	* c-c++-common/goacc/reduction-8.c: New test.

2018-09-20  Cesar Philippidis  <cesar@codesourcery.com>

	* c-c++-common/goacc/loop-auto-1.c: Adjust test case to conform to
	the new behavior of the auto clause in OpenACC 2.5.
	* c-c++-common/goacc/loop-auto-2.c: Likewise.
	* gcc.dg/goacc/loop-processing-1.c: Likewise.
	* c-c++-common/goacc/loop-auto-3.c: New test.
	* gfortran.dg/goacc/loop-auto-1.f90: New test.

2018-08-28  Julian Brown  <julian@codesourcery.com>
            Cesar Philippidis  <cesar@codesourcery.com>

	* c-c++-common/goacc/acc-data-chain.c: New test.
	* gfortran.dg/goacc/pr70828.f90: New test.
	* gfortran.dg/goacc/pr70828-2.f90: New test.

2018-10-05  Nathan Sidwell  <nathan@acm.org>
	    Tom de Vries  <tdevries@suse.de>
	    Thomas Schwinge  <thomas@codesourcery.com>
	    Julian Brown  <julian@codesourcery.com>

	* c-c++-common/goacc/acc-icf.c: Update.
	* c-c++-common/goacc/parallel-dims-1.c: Likewise.
	* c-c++-common/goacc/parallel-reduction.c: Likewise.
	* c-c++-common/goacc/pr70688.c: Likewise.
	* c-c++-common/goacc/routine-1.c: Likewise.
	* c-c++-common/goacc/uninit-dim-clause.c: Likewise.
	* gfortran.dg/goacc/parallel-tree.f95: Likewise.
	* gfortran.dg/goacc/routine-4.f90: Likewise.
	* gfortran.dg/goacc/routine-level-of-parallelism-1.f90: Likewise.
	* gfortran.dg/goacc/uninit-dim-clause.f95: Likewise.

2019-09-20  Chung-Lin Tang <cltang@codesourcery.com>
	    Cesar Philippidis  <cesar@codesourcery.com>

	* c-c++-common/goacc/kernels-loop-acc-loop.c: New test.
	* c-c++-common/goacc/kernels-loop-2-acc-loop.c: New test.
	* c-c++-common/goacc/kernels-loop-3-acc-loop.c: New test.
	* c-c++-common/goacc/kernels-loop-n-acc-loop.c: New test.
	* c-c++-common/goacc/kernels-acc-loop-reduction.c: New test.
	* c-c++-common/goacc/kernels-acc-loop-smaller-equal.c: New test.

2018-10-22  Cesar Philippidis  <cesar@codesourcery.com>

	* g++.dg/goacc/loop-1.c: New test.
	* g++.dg/goacc/loop-2.c: New test.
	* g++.dg/goacc/loop-3.c: New test.

2018-12-13  Cesar Philippidis  <cesar@codesourcery.com>
            Nathan Sidwell  <nathan@acm.org>
            Julian Brown  <julian@codesourcery.com>

	* c-c++-common/goacc/orphan-reductions-1.c: New test.
	* c-c++-common/goacc/reduction-7.c: New test.
	* c-c++-common/goacc/routine-4.c: Update.
	* g++.dg/goacc/reductions-1.C: New test.
	* gcc.dg/goacc/loop-processing-1.c: Update.
	* gfortran.dg/goacc/orphan-reductions-1.f90: New test.

2018-06-29  Cesar Philippidis  <cesar@codesourcery.com>
	    James Norris  <jnorris@codesourcery.com>

	* c-c++-common/goacc/deviceptr-4.c: Update.
	* gfortran.dg/goacc/loop-2.f95: Update.
	* gfortran.dg/goacc/loop-3-2.f95: Update.
	* gfortran.dg/goacc/loop-3.f95: Update.
	* gfortran.dg/goacc/pr72715.f90: New test.
	* gfortran.dg/goacc/sie.f95: Update.
	* gfortran.dg/goacc/tile-1.f90: Update.
	* gfortran.dg/gomp/pr77516.f90: Update.

2018-10-02  Thomas Schwinge  <thomas@codesourcery.com>
	    Cesar Philippidis  <cesar@codesourcery.com>

	* c-c++-common/goacc/routine-1.c: Adjust test.
	* c-c++-common/goacc/routine-2.c: Likewise.
	* c-c++-common/goacc/routine-nohost-1.c: New test.
	* g++.dg/goacc/routine-2.C: Adjust test.
	* gfortran.dg/goacc/pr72741.f90: New test.

2020-04-19  Chung-Lin Tang  <cltang@codesourcery.com>

	PR other/76739

	* c-c++-common/goacc/noncontig_array-1.c: New test.
